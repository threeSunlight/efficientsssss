{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nimport { createPopper } from '@popperjs/core';\nimport { get, merge, flatMap } from 'lodash-unified';\nimport escapeHtml from 'escape-html';\nimport '../../../utils/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { isObject, hasOwn, isArray } from '@vue/shared';\nimport { throwError } from '../../../utils/error.mjs';\nimport { isBoolean } from '../../../utils/types.mjs';\nimport { useDelayedToggle } from '../../../hooks/use-delayed-toggle/index.mjs';\nvar getCell = function getCell(event) {\n  var _a;\n  return (_a = event.target) == null ? void 0 : _a.closest(\"td\");\n};\nvar orderBy = function orderBy(array, sortKey, reverse, sortMethod, sortBy) {\n  if (!sortKey && !sortMethod && (!sortBy || Array.isArray(sortBy) && !sortBy.length)) {\n    return array;\n  }\n  if (typeof reverse === \"string\") {\n    reverse = reverse === \"descending\" ? -1 : 1;\n  } else {\n    reverse = reverse && reverse < 0 ? -1 : 1;\n  }\n  var getKey = sortMethod ? null : function (value, index) {\n    if (sortBy) {\n      if (!Array.isArray(sortBy)) {\n        sortBy = [sortBy];\n      }\n      return sortBy.map(function (by) {\n        if (typeof by === \"string\") {\n          return get(value, by);\n        } else {\n          return by(value, index, array);\n        }\n      });\n    }\n    if (sortKey !== \"$key\") {\n      if (isObject(value) && \"$value\" in value) value = value.$value;\n    }\n    return [isObject(value) ? get(value, sortKey) : value];\n  };\n  var compare = function compare(a, b) {\n    if (sortMethod) {\n      return sortMethod(a.value, b.value);\n    }\n    for (var i = 0, len = a.key.length; i < len; i++) {\n      if (a.key[i] < b.key[i]) {\n        return -1;\n      }\n      if (a.key[i] > b.key[i]) {\n        return 1;\n      }\n    }\n    return 0;\n  };\n  return array.map(function (value, index) {\n    return {\n      value: value,\n      index: index,\n      key: getKey ? getKey(value, index) : null\n    };\n  }).sort(function (a, b) {\n    var order = compare(a, b);\n    if (!order) {\n      order = a.index - b.index;\n    }\n    return order * +reverse;\n  }).map(function (item) {\n    return item.value;\n  });\n};\nvar getColumnById = function getColumnById(table, columnId) {\n  var column = null;\n  table.columns.forEach(function (item) {\n    if (item.id === columnId) {\n      column = item;\n    }\n  });\n  return column;\n};\nvar getColumnByKey = function getColumnByKey(table, columnKey) {\n  var column = null;\n  for (var i = 0; i < table.columns.length; i++) {\n    var item = table.columns[i];\n    if (item.columnKey === columnKey) {\n      column = item;\n      break;\n    }\n  }\n  if (!column) throwError(\"ElTable\", \"No column matching with column-key: \".concat(columnKey));\n  return column;\n};\nvar getColumnByCell = function getColumnByCell(table, cell, namespace) {\n  var matches = (cell.className || \"\").match(new RegExp(\"\".concat(namespace, \"-table_[^\\\\s]+\"), \"gm\"));\n  if (matches) {\n    return getColumnById(table, matches[0]);\n  }\n  return null;\n};\nvar getRowIdentity = function getRowIdentity(row, rowKey) {\n  if (!row) throw new Error(\"Row is required when get row identity\");\n  if (typeof rowKey === \"string\") {\n    if (!rowKey.includes(\".\")) {\n      return \"\".concat(row[rowKey]);\n    }\n    var key = rowKey.split(\".\");\n    var current = row;\n    var _iterator = _createForOfIteratorHelper(key),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var element = _step.value;\n        current = current[element];\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return \"\".concat(current);\n  } else if (typeof rowKey === \"function\") {\n    return rowKey.call(null, row);\n  }\n};\nvar getKeysMap = function getKeysMap(array, rowKey) {\n  var arrayMap = {};\n  (array || []).forEach(function (row, index) {\n    arrayMap[getRowIdentity(row, rowKey)] = {\n      row: row,\n      index: index\n    };\n  });\n  return arrayMap;\n};\nfunction mergeOptions(defaults, config) {\n  var options = {};\n  var key;\n  for (key in defaults) {\n    options[key] = defaults[key];\n  }\n  for (key in config) {\n    if (hasOwn(config, key)) {\n      var value = config[key];\n      if (typeof value !== \"undefined\") {\n        options[key] = value;\n      }\n    }\n  }\n  return options;\n}\nfunction parseWidth(width) {\n  if (width === \"\") return width;\n  if (width !== void 0) {\n    width = Number.parseInt(width, 10);\n    if (Number.isNaN(width)) {\n      width = \"\";\n    }\n  }\n  return width;\n}\nfunction parseMinWidth(minWidth) {\n  if (minWidth === \"\") return minWidth;\n  if (minWidth !== void 0) {\n    minWidth = parseWidth(minWidth);\n    if (Number.isNaN(minWidth)) {\n      minWidth = 80;\n    }\n  }\n  return minWidth;\n}\nfunction parseHeight(height) {\n  if (typeof height === \"number\") {\n    return height;\n  }\n  if (typeof height === \"string\") {\n    if (/^\\d+(?:px)?$/.test(height)) {\n      return Number.parseInt(height, 10);\n    } else {\n      return height;\n    }\n  }\n  return null;\n}\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\nfunction toggleRowStatus(statusArr, row, newVal) {\n  var changed = false;\n  var index = statusArr.indexOf(row);\n  var included = index !== -1;\n  var toggleStatus = function toggleStatus(type) {\n    if (type === \"add\") {\n      statusArr.push(row);\n    } else {\n      statusArr.splice(index, 1);\n    }\n    changed = true;\n    if (isArray(row.children)) {\n      row.children.forEach(function (item) {\n        toggleRowStatus(statusArr, item, newVal != null ? newVal : !included);\n      });\n    }\n  };\n  if (isBoolean(newVal)) {\n    if (newVal && !included) {\n      toggleStatus(\"add\");\n    } else if (!newVal && included) {\n      toggleStatus(\"remove\");\n    }\n  } else {\n    included ? toggleStatus(\"remove\") : toggleStatus(\"add\");\n  }\n  return changed;\n}\nfunction walkTreeNode(root, cb) {\n  var childrenKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"children\";\n  var lazyKey = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"hasChildren\";\n  var isNil = function isNil(array) {\n    return !(Array.isArray(array) && array.length);\n  };\n  function _walker(parent, children, level) {\n    cb(parent, children, level);\n    children.forEach(function (item) {\n      if (item[lazyKey]) {\n        cb(item, null, level + 1);\n        return;\n      }\n      var children2 = item[childrenKey];\n      if (!isNil(children2)) {\n        _walker(item, children2, level + 1);\n      }\n    });\n  }\n  root.forEach(function (item) {\n    if (item[lazyKey]) {\n      cb(item, null, 0);\n      return;\n    }\n    var children = item[childrenKey];\n    if (!isNil(children)) {\n      _walker(item, children, 0);\n    }\n  });\n}\nvar _removePopper;\nfunction createTablePopper(parentNode, trigger, popperContent, nextZIndex, tooltipOptions) {\n  tooltipOptions = merge({\n    enterable: true,\n    showArrow: true\n  }, tooltipOptions);\n  var ns = parentNode == null ? void 0 : parentNode.dataset.prefix;\n  var scrollContainer = parentNode == null ? void 0 : parentNode.querySelector(\".\".concat(ns, \"-scrollbar__wrap\"));\n  function renderContent() {\n    var isLight = tooltipOptions.effect === \"light\";\n    var content2 = document.createElement(\"div\");\n    content2.className = [\"\".concat(ns, \"-popper\"), isLight ? \"is-light\" : \"is-dark\", tooltipOptions.popperClass || \"\"].join(\" \");\n    popperContent = escapeHtml(popperContent);\n    content2.innerHTML = popperContent;\n    content2.style.zIndex = String(nextZIndex());\n    parentNode == null ? void 0 : parentNode.appendChild(content2);\n    return content2;\n  }\n  function renderArrow() {\n    var arrow = document.createElement(\"div\");\n    arrow.className = \"\".concat(ns, \"-popper__arrow\");\n    return arrow;\n  }\n  function showPopper() {\n    popperInstance && popperInstance.update();\n  }\n  _removePopper == null ? void 0 : _removePopper();\n  _removePopper = function removePopper() {\n    try {\n      popperInstance && popperInstance.destroy();\n      content && (parentNode == null ? void 0 : parentNode.removeChild(content));\n      trigger.removeEventListener(\"mouseenter\", onOpen);\n      trigger.removeEventListener(\"mouseleave\", onClose);\n      scrollContainer == null ? void 0 : scrollContainer.removeEventListener(\"scroll\", _removePopper);\n      _removePopper = void 0;\n    } catch (e) {}\n  };\n  var popperInstance = null;\n  var onOpen = showPopper;\n  var onClose = _removePopper;\n  if (tooltipOptions.enterable) {\n    ;\n    var _useDelayedToggle = useDelayedToggle({\n      showAfter: tooltipOptions.showAfter,\n      hideAfter: tooltipOptions.hideAfter,\n      open: showPopper,\n      close: _removePopper\n    });\n    onOpen = _useDelayedToggle.onOpen;\n    onClose = _useDelayedToggle.onClose;\n  }\n  var content = renderContent();\n  content.onmouseenter = onOpen;\n  content.onmouseleave = onClose;\n  var modifiers = [];\n  if (tooltipOptions.offset) {\n    modifiers.push({\n      name: \"offset\",\n      options: {\n        offset: [0, tooltipOptions.offset]\n      }\n    });\n  }\n  if (tooltipOptions.showArrow) {\n    var arrow = content.appendChild(renderArrow());\n    modifiers.push({\n      name: \"arrow\",\n      options: {\n        element: arrow,\n        padding: 10\n      }\n    });\n  }\n  var popperOptions = tooltipOptions.popperOptions || {};\n  popperInstance = createPopper(trigger, content, _objectSpread(_objectSpread({\n    placement: tooltipOptions.placement || \"top\",\n    strategy: \"fixed\"\n  }, popperOptions), {}, {\n    modifiers: popperOptions.modifiers ? modifiers.concat(popperOptions.modifiers) : modifiers\n  }));\n  trigger.addEventListener(\"mouseenter\", onOpen);\n  trigger.addEventListener(\"mouseleave\", onClose);\n  scrollContainer == null ? void 0 : scrollContainer.addEventListener(\"scroll\", _removePopper);\n  return popperInstance;\n}\nfunction getCurrentColumns(column) {\n  if (column.children) {\n    return flatMap(column.children, getCurrentColumns);\n  } else {\n    return [column];\n  }\n}\nfunction getColSpan(colSpan, column) {\n  return colSpan + column.colSpan;\n}\nvar isFixedColumn = function isFixedColumn(index, fixed, store, realColumns) {\n  var start = 0;\n  var after = index;\n  var columns = store.states.columns.value;\n  if (realColumns) {\n    var curColumns = getCurrentColumns(realColumns[index]);\n    var preColumns = columns.slice(0, columns.indexOf(curColumns[0]));\n    start = preColumns.reduce(getColSpan, 0);\n    after = start + curColumns.reduce(getColSpan, 0) - 1;\n  } else {\n    start = index;\n  }\n  var fixedLayout;\n  switch (fixed) {\n    case \"left\":\n      if (after < store.states.fixedLeafColumnsLength.value) {\n        fixedLayout = \"left\";\n      }\n      break;\n    case \"right\":\n      if (start >= columns.length - store.states.rightFixedLeafColumnsLength.value) {\n        fixedLayout = \"right\";\n      }\n      break;\n    default:\n      if (after < store.states.fixedLeafColumnsLength.value) {\n        fixedLayout = \"left\";\n      } else if (start >= columns.length - store.states.rightFixedLeafColumnsLength.value) {\n        fixedLayout = \"right\";\n      }\n  }\n  return fixedLayout ? {\n    direction: fixedLayout,\n    start: start,\n    after: after\n  } : {};\n};\nvar getFixedColumnsClass = function getFixedColumnsClass(namespace, index, fixed, store, realColumns) {\n  var offset = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n  var classes = [];\n  var _isFixedColumn = isFixedColumn(index, fixed, store, realColumns),\n    direction = _isFixedColumn.direction,\n    start = _isFixedColumn.start,\n    after = _isFixedColumn.after;\n  if (direction) {\n    var isLeft = direction === \"left\";\n    classes.push(\"\".concat(namespace, \"-fixed-column--\").concat(direction));\n    if (isLeft && after + offset === store.states.fixedLeafColumnsLength.value - 1) {\n      classes.push(\"is-last-column\");\n    } else if (!isLeft && start - offset === store.states.columns.value.length - store.states.rightFixedLeafColumnsLength.value) {\n      classes.push(\"is-first-column\");\n    }\n  }\n  return classes;\n};\nfunction getOffset(offset, column) {\n  return offset + (column.realWidth === null || Number.isNaN(column.realWidth) ? Number(column.width) : column.realWidth);\n}\nvar getFixedColumnOffset = function getFixedColumnOffset(index, fixed, store, realColumns) {\n  var _isFixedColumn2 = isFixedColumn(index, fixed, store, realColumns),\n    direction = _isFixedColumn2.direction,\n    _isFixedColumn2$start = _isFixedColumn2.start,\n    start = _isFixedColumn2$start === void 0 ? 0 : _isFixedColumn2$start,\n    _isFixedColumn2$after = _isFixedColumn2.after,\n    after = _isFixedColumn2$after === void 0 ? 0 : _isFixedColumn2$after;\n  if (!direction) {\n    return;\n  }\n  var styles = {};\n  var isLeft = direction === \"left\";\n  var columns = store.states.columns.value;\n  if (isLeft) {\n    styles.left = columns.slice(0, start).reduce(getOffset, 0);\n  } else {\n    styles.right = columns.slice(after + 1).reverse().reduce(getOffset, 0);\n  }\n  return styles;\n};\nvar ensurePosition = function ensurePosition(style, key) {\n  if (!style) return;\n  if (!Number.isNaN(style[key])) {\n    style[key] = \"\".concat(style[key], \"px\");\n  }\n};\nexport { compose, createTablePopper, ensurePosition, getCell, getColumnByCell, getColumnById, getColumnByKey, getFixedColumnOffset, getFixedColumnsClass, getKeysMap, getRowIdentity, isFixedColumn, mergeOptions, orderBy, parseHeight, parseMinWidth, parseWidth, _removePopper as removePopper, toggleRowStatus, walkTreeNode };","map":{"version":3,"names":["getCell","event","_a","target","closest","orderBy","array","sortKey","reverse","sortMethod","sortBy","Array","isArray","length","getKey","value","index","map","by","get","isObject","$value","compare","a","b","i","len","key","sort","order","item","getColumnById","table","columnId","column","columns","forEach","id","getColumnByKey","columnKey","throwError","concat","getColumnByCell","cell","namespace","matches","className","match","RegExp","getRowIdentity","row","rowKey","Error","includes","split","current","_iterator","_createForOfIteratorHelper","_step","s","n","done","element","err","e","f","call","getKeysMap","arrayMap","mergeOptions","defaults","config","options","hasOwn","parseWidth","width","Number","parseInt","isNaN","parseMinWidth","minWidth","parseHeight","height","test","compose","_len","arguments","funcs","_key","arg","reduce","apply","toggleRowStatus","statusArr","newVal","changed","indexOf","included","toggleStatus","type","push","splice","children","isBoolean","walkTreeNode","root","cb","childrenKey","undefined","lazyKey","isNil","_walker","parent","level","children2","removePopper","createTablePopper","parentNode","trigger","popperContent","nextZIndex","tooltipOptions","merge","enterable","showArrow","ns","dataset","prefix","scrollContainer","querySelector","renderContent","isLight","effect","content2","document","createElement","popperClass","join","escapeHtml","innerHTML","style","zIndex","String","appendChild","renderArrow","arrow","showPopper","popperInstance","update","destroy","content","removeChild","removeEventListener","onOpen","onClose","_useDelayedToggle","useDelayedToggle","showAfter","hideAfter","open","close","onmouseenter","onmouseleave","modifiers","offset","name","padding","popperOptions","createPopper","_objectSpread","placement","strategy","addEventListener","getCurrentColumns","flatMap","getColSpan","colSpan","isFixedColumn","fixed","store","realColumns","start","after","states","curColumns","preColumns","slice","fixedLayout","fixedLeafColumnsLength","rightFixedLeafColumnsLength","direction","getFixedColumnsClass","classes","_isFixedColumn","isLeft","getOffset","realWidth","getFixedColumnOffset","_isFixedColumn2","_isFixedColumn2$start","_isFixedColumn2$after","styles","left","right","ensurePosition"],"sources":["../../../../../../packages/components/table/src/util.ts"],"sourcesContent":["// @ts-nocheck\nimport { createPopper } from '@popperjs/core'\nimport { flatMap, get, merge } from 'lodash-unified'\nimport escapeHtml from 'escape-html'\nimport {\n  hasOwn,\n  isArray,\n  isBoolean,\n  isObject,\n  throwError,\n} from '@element-plus/utils'\nimport { useDelayedToggle } from '@element-plus/hooks'\nimport type { PopperInstance } from '@element-plus/components/popper'\nimport type { Nullable } from '@element-plus/utils'\nimport type { TableColumnCtx } from './table-column/defaults'\nimport type { ElTooltipProps } from '@element-plus/components/tooltip'\n\nexport type TableOverflowTooltipOptions = Partial<\n  Pick<\n    ElTooltipProps,\n    | 'effect'\n    | 'enterable'\n    | 'hideAfter'\n    | 'offset'\n    | 'placement'\n    | 'popperClass'\n    | 'popperOptions'\n    | 'showAfter'\n    | 'showArrow'\n    // | 'transition'\n  >\n>\n\nexport const getCell = function (event: Event) {\n  return (event.target as HTMLElement)?.closest('td')\n}\n\nexport const orderBy = function <T>(\n  array: T[],\n  sortKey: string,\n  reverse: string | number,\n  sortMethod,\n  sortBy: string | (string | ((a: T, b: T, array?: T[]) => number))[]\n) {\n  if (\n    !sortKey &&\n    !sortMethod &&\n    (!sortBy || (Array.isArray(sortBy) && !sortBy.length))\n  ) {\n    return array\n  }\n  if (typeof reverse === 'string') {\n    reverse = reverse === 'descending' ? -1 : 1\n  } else {\n    reverse = reverse && reverse < 0 ? -1 : 1\n  }\n  const getKey = sortMethod\n    ? null\n    : function (value, index) {\n        if (sortBy) {\n          if (!Array.isArray(sortBy)) {\n            sortBy = [sortBy]\n          }\n          return sortBy.map((by) => {\n            if (typeof by === 'string') {\n              return get(value, by)\n            } else {\n              return by(value, index, array)\n            }\n          })\n        }\n        if (sortKey !== '$key') {\n          if (isObject(value) && '$value' in value) value = value.$value\n        }\n        return [isObject(value) ? get(value, sortKey) : value]\n      }\n  const compare = function (a, b) {\n    if (sortMethod) {\n      return sortMethod(a.value, b.value)\n    }\n    for (let i = 0, len = a.key.length; i < len; i++) {\n      if (a.key[i] < b.key[i]) {\n        return -1\n      }\n      if (a.key[i] > b.key[i]) {\n        return 1\n      }\n    }\n    return 0\n  }\n  return array\n    .map((value, index) => {\n      return {\n        value,\n        index,\n        key: getKey ? getKey(value, index) : null,\n      }\n    })\n    .sort((a, b) => {\n      let order = compare(a, b)\n      if (!order) {\n        // make stable https://en.wikipedia.org/wiki/Sorting_algorithm#Stability\n        order = a.index - b.index\n      }\n      return order * +reverse\n    })\n    .map((item) => item.value)\n}\n\nexport const getColumnById = function <T>(\n  table: {\n    columns: TableColumnCtx<T>[]\n  },\n  columnId: string\n): null | TableColumnCtx<T> {\n  let column = null\n  table.columns.forEach((item) => {\n    if (item.id === columnId) {\n      column = item\n    }\n  })\n  return column\n}\n\nexport const getColumnByKey = function <T>(\n  table: {\n    columns: TableColumnCtx<T>[]\n  },\n  columnKey: string\n): TableColumnCtx<T> {\n  let column = null\n  for (let i = 0; i < table.columns.length; i++) {\n    const item = table.columns[i]\n    if (item.columnKey === columnKey) {\n      column = item\n      break\n    }\n  }\n  if (!column)\n    throwError('ElTable', `No column matching with column-key: ${columnKey}`)\n  return column\n}\n\nexport const getColumnByCell = function <T>(\n  table: {\n    columns: TableColumnCtx<T>[]\n  },\n  cell: HTMLElement,\n  namespace: string\n): null | TableColumnCtx<T> {\n  const matches = (cell.className || '').match(\n    new RegExp(`${namespace}-table_[^\\\\s]+`, 'gm')\n  )\n  if (matches) {\n    return getColumnById(table, matches[0])\n  }\n  return null\n}\n\nexport const getRowIdentity = <T>(\n  row: T,\n  rowKey: string | ((row: T) => any)\n): string => {\n  if (!row) throw new Error('Row is required when get row identity')\n  if (typeof rowKey === 'string') {\n    if (!rowKey.includes('.')) {\n      return `${row[rowKey]}`\n    }\n    const key = rowKey.split('.')\n    let current = row\n    for (const element of key) {\n      current = current[element]\n    }\n    return `${current}`\n  } else if (typeof rowKey === 'function') {\n    return rowKey.call(null, row)\n  }\n}\n\nexport const getKeysMap = function <T>(\n  array: T[],\n  rowKey: string\n): Record<string, { row: T; index: number }> {\n  const arrayMap = {}\n  ;(array || []).forEach((row, index) => {\n    arrayMap[getRowIdentity(row, rowKey)] = { row, index }\n  })\n  return arrayMap\n}\n\nexport function mergeOptions<T, K>(defaults: T, config: K): T & K {\n  const options = {} as T & K\n  let key\n  for (key in defaults) {\n    options[key] = defaults[key]\n  }\n  for (key in config) {\n    if (hasOwn(config as unknown as Record<string, any>, key)) {\n      const value = config[key]\n      if (typeof value !== 'undefined') {\n        options[key] = value\n      }\n    }\n  }\n  return options\n}\n\nexport function parseWidth(width: number | string): number | string {\n  if (width === '') return width\n  if (width !== undefined) {\n    width = Number.parseInt(width as string, 10)\n    if (Number.isNaN(width)) {\n      width = ''\n    }\n  }\n  return width\n}\n\nexport function parseMinWidth(minWidth: number | string): number | string {\n  if (minWidth === '') return minWidth\n  if (minWidth !== undefined) {\n    minWidth = parseWidth(minWidth)\n    if (Number.isNaN(minWidth)) {\n      minWidth = 80\n    }\n  }\n  return minWidth\n}\n\nexport function parseHeight(height: number | string) {\n  if (typeof height === 'number') {\n    return height\n  }\n  if (typeof height === 'string') {\n    if (/^\\d+(?:px)?$/.test(height)) {\n      return Number.parseInt(height, 10)\n    } else {\n      return height\n    }\n  }\n  return null\n}\n\n// https://github.com/reduxjs/redux/blob/master/src/compose.js\nexport function compose(...funcs) {\n  if (funcs.length === 0) {\n    return (arg) => arg\n  }\n  if (funcs.length === 1) {\n    return funcs[0]\n  }\n  return funcs.reduce(\n    (a, b) =>\n      (...args) =>\n        a(b(...args))\n  )\n}\n\nexport function toggleRowStatus<T>(\n  statusArr: T[],\n  row: T,\n  newVal: boolean\n): boolean {\n  let changed = false\n  const index = statusArr.indexOf(row)\n  const included = index !== -1\n\n  const toggleStatus = (type: 'add' | 'remove') => {\n    if (type === 'add') {\n      statusArr.push(row)\n    } else {\n      statusArr.splice(index, 1)\n    }\n    changed = true\n    if (isArray(row.children)) {\n      row.children.forEach((item) => {\n        toggleRowStatus(statusArr, item, newVal ?? !included)\n      })\n    }\n  }\n\n  if (isBoolean(newVal)) {\n    if (newVal && !included) {\n      toggleStatus('add')\n    } else if (!newVal && included) {\n      toggleStatus('remove')\n    }\n  } else {\n    included ? toggleStatus('remove') : toggleStatus('add')\n  }\n  return changed\n}\n\nexport function walkTreeNode(\n  root,\n  cb,\n  childrenKey = 'children',\n  lazyKey = 'hasChildren'\n) {\n  const isNil = (array) => !(Array.isArray(array) && array.length)\n\n  function _walker(parent, children, level) {\n    cb(parent, children, level)\n    children.forEach((item) => {\n      if (item[lazyKey]) {\n        cb(item, null, level + 1)\n        return\n      }\n      const children = item[childrenKey]\n      if (!isNil(children)) {\n        _walker(item, children, level + 1)\n      }\n    })\n  }\n\n  root.forEach((item) => {\n    if (item[lazyKey]) {\n      cb(item, null, 0)\n      return\n    }\n    const children = item[childrenKey]\n    if (!isNil(children)) {\n      _walker(item, children, 0)\n    }\n  })\n}\n\nexport let removePopper\n\nexport function createTablePopper(\n  parentNode: HTMLElement | undefined,\n  trigger: HTMLElement,\n  popperContent: string,\n  nextZIndex: () => number,\n  tooltipOptions?: TableOverflowTooltipOptions\n) {\n  // TODO transition\n  tooltipOptions = merge(\n    {\n      enterable: true,\n      showArrow: true,\n    } as TableOverflowTooltipOptions,\n    tooltipOptions\n  )\n  const ns = parentNode?.dataset.prefix\n  const scrollContainer = parentNode?.querySelector(`.${ns}-scrollbar__wrap`)\n  function renderContent(): HTMLDivElement {\n    const isLight = tooltipOptions.effect === 'light'\n    const content = document.createElement('div')\n    content.className = [\n      `${ns}-popper`,\n      isLight ? 'is-light' : 'is-dark',\n      tooltipOptions.popperClass || '',\n    ].join(' ')\n    popperContent = escapeHtml(popperContent)\n    content.innerHTML = popperContent\n    content.style.zIndex = String(nextZIndex())\n    // Avoid side effects caused by append to body\n    parentNode?.appendChild(content)\n    return content\n  }\n  function renderArrow(): HTMLDivElement {\n    const arrow = document.createElement('div')\n    arrow.className = `${ns}-popper__arrow`\n    return arrow\n  }\n  function showPopper() {\n    popperInstance && popperInstance.update()\n  }\n  removePopper?.()\n  removePopper = () => {\n    try {\n      popperInstance && popperInstance.destroy()\n      content && parentNode?.removeChild(content)\n      trigger.removeEventListener('mouseenter', onOpen)\n      trigger.removeEventListener('mouseleave', onClose)\n      scrollContainer?.removeEventListener('scroll', removePopper)\n      removePopper = undefined\n    } catch {}\n  }\n  let popperInstance: Nullable<PopperInstance> = null\n  let onOpen = showPopper\n  let onClose = removePopper\n  if (tooltipOptions.enterable) {\n    ;({ onOpen, onClose } = useDelayedToggle({\n      showAfter: tooltipOptions.showAfter,\n      hideAfter: tooltipOptions.hideAfter,\n      open: showPopper,\n      close: removePopper,\n    }))\n  }\n  const content = renderContent()\n  content.onmouseenter = onOpen\n  content.onmouseleave = onClose\n  const modifiers = []\n  if (tooltipOptions.offset) {\n    modifiers.push({\n      name: 'offset',\n      options: {\n        offset: [0, tooltipOptions.offset],\n      },\n    })\n  }\n  if (tooltipOptions.showArrow) {\n    const arrow = content.appendChild(renderArrow())\n    modifiers.push({\n      name: 'arrow',\n      options: {\n        element: arrow,\n        padding: 10,\n      },\n    })\n  }\n  const popperOptions = tooltipOptions.popperOptions || {}\n  popperInstance = createPopper(trigger, content, {\n    placement: tooltipOptions.placement || 'top',\n    strategy: 'fixed',\n    ...popperOptions,\n    modifiers: popperOptions.modifiers\n      ? modifiers.concat(popperOptions.modifiers)\n      : modifiers,\n  })\n  trigger.addEventListener('mouseenter', onOpen)\n  trigger.addEventListener('mouseleave', onClose)\n  scrollContainer?.addEventListener('scroll', removePopper)\n  return popperInstance\n}\n\nfunction getCurrentColumns<T>(column: TableColumnCtx<T>): TableColumnCtx<T>[] {\n  if (column.children) {\n    return flatMap(column.children, getCurrentColumns)\n  } else {\n    return [column]\n  }\n}\n\nfunction getColSpan<T>(colSpan: number, column: TableColumnCtx<T>) {\n  return colSpan + column.colSpan\n}\n\nexport const isFixedColumn = <T>(\n  index: number,\n  fixed: string | boolean,\n  store: any,\n  realColumns?: TableColumnCtx<T>[]\n) => {\n  let start = 0\n  let after = index\n  const columns = store.states.columns.value\n  if (realColumns) {\n    // fixed column supported in grouped header\n    const curColumns = getCurrentColumns(realColumns[index])\n    const preColumns = columns.slice(0, columns.indexOf(curColumns[0]))\n\n    start = preColumns.reduce(getColSpan, 0)\n    after = start + curColumns.reduce(getColSpan, 0) - 1\n  } else {\n    start = index\n  }\n  let fixedLayout\n  switch (fixed) {\n    case 'left':\n      if (after < store.states.fixedLeafColumnsLength.value) {\n        fixedLayout = 'left'\n      }\n      break\n    case 'right':\n      if (\n        start >=\n        columns.length - store.states.rightFixedLeafColumnsLength.value\n      ) {\n        fixedLayout = 'right'\n      }\n      break\n    default:\n      if (after < store.states.fixedLeafColumnsLength.value) {\n        fixedLayout = 'left'\n      } else if (\n        start >=\n        columns.length - store.states.rightFixedLeafColumnsLength.value\n      ) {\n        fixedLayout = 'right'\n      }\n  }\n  return fixedLayout\n    ? {\n        direction: fixedLayout,\n        start,\n        after,\n      }\n    : {}\n}\n\nexport const getFixedColumnsClass = <T>(\n  namespace: string,\n  index: number,\n  fixed: string | boolean,\n  store: any,\n  realColumns?: TableColumnCtx<T>[],\n  offset = 0\n) => {\n  const classes: string[] = []\n  const { direction, start, after } = isFixedColumn(\n    index,\n    fixed,\n    store,\n    realColumns\n  )\n  if (direction) {\n    const isLeft = direction === 'left'\n    classes.push(`${namespace}-fixed-column--${direction}`)\n    if (\n      isLeft &&\n      after + offset === store.states.fixedLeafColumnsLength.value - 1\n    ) {\n      classes.push('is-last-column')\n    } else if (\n      !isLeft &&\n      start - offset ===\n        store.states.columns.value.length -\n          store.states.rightFixedLeafColumnsLength.value\n    ) {\n      classes.push('is-first-column')\n    }\n  }\n  return classes\n}\n\nfunction getOffset<T>(offset: number, column: TableColumnCtx<T>) {\n  return (\n    offset +\n    (column.realWidth === null || Number.isNaN(column.realWidth)\n      ? Number(column.width)\n      : column.realWidth)\n  )\n}\n\nexport const getFixedColumnOffset = <T>(\n  index: number,\n  fixed: string | boolean,\n  store: any,\n  realColumns?: TableColumnCtx<T>[]\n) => {\n  const {\n    direction,\n    start = 0,\n    after = 0,\n  } = isFixedColumn(index, fixed, store, realColumns)\n  if (!direction) {\n    return\n  }\n  const styles: any = {}\n  const isLeft = direction === 'left'\n  const columns = store.states.columns.value\n  if (isLeft) {\n    styles.left = columns.slice(0, start).reduce(getOffset, 0)\n  } else {\n    styles.right = columns\n      .slice(after + 1)\n      .reverse()\n      .reduce(getOffset, 0)\n  }\n  return styles\n}\n\nexport const ensurePosition = (style, key: string) => {\n  if (!style) return\n  if (!Number.isNaN(style[key])) {\n    style[key] = `${style[key]}px`\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}