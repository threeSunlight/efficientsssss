{"ast":null,"code":"var _excluded = [\"cacheOptions\"];\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { defineComponent, ref, computed, reactive, onMounted, h } from 'vue';\nimport { pick } from 'lodash-unified';\nimport { ElSelect } from '../../select/index.mjs';\nimport _Tree from '../../tree/index.mjs';\nimport { useSelect } from './select.mjs';\nimport { useTree } from './tree.mjs';\nimport CacheOptions from './cache-options.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nvar _sfc_main = defineComponent({\n  name: \"ElTreeSelect\",\n  inheritAttrs: false,\n  props: _objectSpread(_objectSpread(_objectSpread({}, ElSelect.props), _Tree.props), {}, {\n    cacheData: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    }\n  }),\n  setup: function setup(props, context) {\n    var slots = context.slots,\n      expose = context.expose;\n    var select = ref();\n    var tree = ref();\n    var key = computed(function () {\n      return props.nodeKey || props.valueKey || \"value\";\n    });\n    var selectProps = useSelect(props, context, {\n      select: select,\n      tree: tree,\n      key: key\n    });\n    var _useTree = useTree(props, context, {\n        select: select,\n        tree: tree,\n        key: key\n      }),\n      cacheOptions = _useTree.cacheOptions,\n      treeProps = _objectWithoutProperties(_useTree, _excluded);\n    var methods = reactive({});\n    expose(methods);\n    onMounted(function () {\n      Object.assign(methods, _objectSpread(_objectSpread({}, pick(tree.value, [\"filter\", \"updateKeyChildren\", \"getCheckedNodes\", \"setCheckedNodes\", \"getCheckedKeys\", \"setCheckedKeys\", \"setChecked\", \"getHalfCheckedNodes\", \"getHalfCheckedKeys\", \"getCurrentKey\", \"getCurrentNode\", \"setCurrentKey\", \"setCurrentNode\", \"getNode\", \"remove\", \"append\", \"insertBefore\", \"insertAfter\"])), pick(select.value, [\"focus\", \"blur\"])));\n    });\n    return function () {\n      return h(ElSelect, reactive(_objectSpread(_objectSpread({}, selectProps), {}, {\n        ref: function ref(ref2) {\n          return select.value = ref2;\n        }\n      })), _objectSpread(_objectSpread({}, slots), {}, {\n        \"default\": function _default() {\n          return [h(CacheOptions, {\n            data: cacheOptions.value\n          }), h(_Tree, reactive(_objectSpread(_objectSpread({}, treeProps), {}, {\n            ref: function ref(ref2) {\n              return tree.value = ref2;\n            }\n          })))];\n        }\n      }));\n    };\n  }\n});\nvar TreeSelect = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue\"]]);\nexport { TreeSelect as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","inheritAttrs","props","_objectSpread","ElSelect","_Tree","cacheData","type","Array","_default","setup","context","slots","expose","select","ref","tree","key","computed","nodeKey","valueKey","selectProps","useSelect","_useTree","useTree","cacheOptions","treeProps","_objectWithoutProperties","_excluded","methods","reactive","onMounted","Object","assign","pick","value","h","ref2","CacheOptions","data"],"sources":["../../../../../../packages/components/tree-select/src/tree-select.vue"],"sourcesContent":["<script lang=\"ts\">\n// @ts-nocheck\nimport { computed, defineComponent, h, onMounted, reactive, ref } from 'vue'\nimport { pick } from 'lodash-unified'\nimport ElSelect from '@element-plus/components/select'\nimport ElTree from '@element-plus/components/tree'\nimport { useSelect } from './select'\nimport { useTree } from './tree'\nimport CacheOptions from './cache-options'\n\nexport default defineComponent({\n  name: 'ElTreeSelect',\n  // disable `ElSelect` inherit current attrs\n  inheritAttrs: false,\n  props: {\n    ...ElSelect.props,\n    ...ElTree.props,\n    /**\n     * @description The cached data of the lazy node, the structure is the same as the data, used to get the label of the unloaded data\n     */\n    cacheData: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  setup(props, context) {\n    const { slots, expose } = context\n\n    const select = ref<InstanceType<typeof ElSelect>>()\n    const tree = ref<InstanceType<typeof ElTree>>()\n\n    const key = computed(() => props.nodeKey || props.valueKey || 'value')\n\n    const selectProps = useSelect(props, context, { select, tree, key })\n    const { cacheOptions, ...treeProps } = useTree(props, context, {\n      select,\n      tree,\n      key,\n    })\n\n    // expose ElTree/ElSelect methods\n    const methods = reactive({})\n    expose(methods)\n    onMounted(() => {\n      Object.assign(methods, {\n        ...pick(tree.value, [\n          'filter',\n          'updateKeyChildren',\n          'getCheckedNodes',\n          'setCheckedNodes',\n          'getCheckedKeys',\n          'setCheckedKeys',\n          'setChecked',\n          'getHalfCheckedNodes',\n          'getHalfCheckedKeys',\n          'getCurrentKey',\n          'getCurrentNode',\n          'setCurrentKey',\n          'setCurrentNode',\n          'getNode',\n          'remove',\n          'append',\n          'insertBefore',\n          'insertAfter',\n        ]),\n        ...pick(select.value, ['focus', 'blur']),\n      })\n    })\n\n    return () =>\n      h(\n        ElSelect,\n        /**\n         * 1. The `props` is processed into `Refs`, but `v-bind` and\n         * render function props cannot read `Refs`, so use `reactive`\n         * unwrap the `Refs` and keep reactive.\n         * 2. The keyword `ref` requires `Ref`, but `reactive` broke it,\n         * so use function.\n         */\n        reactive({\n          ...selectProps,\n          ref: (ref) => (select.value = ref),\n        }),\n        {\n          ...slots,\n          default: () => [\n            h(CacheOptions, { data: cacheOptions.value }),\n            h(\n              ElTree,\n              reactive({\n                ...treeProps,\n                ref: (ref) => (tree.value = ref),\n              })\n            ),\n          ],\n        }\n      )\n  },\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;AAUA,IAAKA,SAAA,GAAaC,eAAa;EAC7BC,IAAM;EAENC,YAAc;EACdC,KAAO,EAAAC,aAAA,CAAAA,aAAA,CAAAA,aAAA,KACFC,QAAS,CAAAF,KAAA,GACTG,KAAO,CAAAH,KAAA;IAIVI,SAAW;MACTC,IAAM,EAAAC,KAAA;MACN,WAAS,SAAAC,SAAA;QAAA,OAAM,EAAC;MAAA;IAAA;EAClB,EACF;EACAC,KAAA,WAAAA,MAAMR,KAAA,EAAOS,OAAS;IACd,IAAEC,KAAA,GAAkBD,OAAA,CAAlBC,KAAA;MAAOC,MAAW,GAAAF,OAAA,CAAXE,MAAW;IAE1B,IAAMC,MAAA,GAASC,GAAmC;IAClD,IAAMC,IAAA,GAAOD,GAAiC;IAE9C,IAAME,GAAA,GAAMC,QAAS;MAAA,OAAMhB,KAAA,CAAMiB,OAAW,IAAAjB,KAAA,CAAMkB,QAAA,IAAY,OAAO;IAAA;IAE/D,IAAAC,WAAA,GAAcC,SAAA,CAAUpB,KAAO,EAAAS,OAAA,EAAS;MAAEG,MAAQ,EAARA,MAAQ;MAAAE,IAAA,EAAAA,IAAA;MAAMC,GAAA,EAAAA;IAAA,CAAK;IACnE,IAAAM,QAAA,GAAuCC,OAAA,CAAQtB,KAAA,EAAOS,OAAS;QAC7DG,MAAA,EAAAA,MAAA;QACAE,IAAA,EAAAA,IAAA;QACAC,GAAA,EAAAA;MAAA,CACD;MAJOQ,YAAA,GAAAF,QAAA,CAAAE,YAAA;MAAiBC,SAAc,GAAAC,wBAAA,CAAAJ,QAAA,EAAAK,SAAA;IAOjC,IAAAC,OAAA,GAAUC,QAAS,GAAE;IAC3BjB,MAAA,CAAOgB,OAAO;IACdE,SAAA,CAAU,YAAM;MACdC,MAAA,CAAOC,MAAA,CAAOJ,OAAS,EAAA1B,aAAA,CAAAA,aAAA,KAClB+B,IAAK,CAAAlB,IAAA,CAAKmB,KAAO,GAClB,UACA,qBACA,mBACA,mBACA,kBACA,kBACA,cACA,uBACA,sBACA,iBACA,kBACA,iBACA,kBACA,WACA,UACA,UACA,gBACA,cACD,IACED,IAAK,CAAApB,MAAA,CAAOqB,KAAA,EAAO,CAAC,SAAS,MAAM,CAAC,EACxC;IAAA,CACF;IAEM;MAAA,OACLC,CACE,CAAAhC,QAAA,EAQA0B,QAAS,CAAA3B,aAAA,CAAAA,aAAA,KACJkB,WAAA;QACHN,GAAK,WAAAA,IAACsB,IAAS;UAAA,OAAAvB,MAAA,CAAOqB,KAAQ,GAAAE,IAAA;QAAA;MAAA,EAC/B,CACD,EAAAlC,aAAA,CAAAA,aAAA,KACKS,KAAA;QACH,WAAS,SAAAH,SAAA;UAAA,OAAM,CACb2B,CAAA,CAAEE,YAAc;YAAEC,IAAM,EAAAd,YAAA,CAAaU;UAAA,CAAO,GAC5CC,CAAA,CACE/B,KAAA,EACAyB,QAAS,CAAA3B,aAAA,CAAAA,aAAA,KACJuB,SAAA;YACHX,GAAK,WAAAA,IAACsB,IAAS;cAAA,OAAArB,IAAA,CAAKmB,KAAQ,GAAAE,IAAA;YAAA;UAAA,EAC7B,CACH,EACF;QAAA;MAAA,EAEJ;IAAA;EAAA;AAEN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}