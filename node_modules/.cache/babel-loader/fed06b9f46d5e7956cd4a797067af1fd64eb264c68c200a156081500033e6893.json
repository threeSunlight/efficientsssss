{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { defineComponent, ref, openBlock, createBlock, TransitionGroup, normalizeClass, unref, withCtx, createElementBlock, Fragment, renderList, withKeys, renderSlot, createCommentVNode, createElementVNode, withModifiers, createVNode, toDisplayString, normalizeStyle } from 'vue';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { Document, CircleCheck, Check, Close, ZoomIn, Delete } from '@element-plus/icons-vue';\nimport '../../../hooks/index.mjs';\nimport { ElProgress } from '../../progress/index.mjs';\nimport '../../form/index.mjs';\nimport { uploadListProps, uploadListEmits } from './upload-list.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useFormDisabled } from '../../form/src/hooks/use-form-common-props.mjs';\nvar _hoisted_1 = [\"onKeydown\"];\nvar _hoisted_2 = [\"src\"];\nvar _hoisted_3 = [\"onClick\"];\nvar _hoisted_4 = [\"title\"];\nvar _hoisted_5 = [\"onClick\"];\nvar _hoisted_6 = [\"onClick\"];\nvar __default__ = defineComponent({\n  name: \"ElUploadList\"\n});\nvar _sfc_main = /* @__PURE__ */defineComponent(_objectSpread(_objectSpread({}, __default__), {}, {\n  props: uploadListProps,\n  emits: uploadListEmits,\n  setup: function setup(__props, _ref) {\n    var emit = _ref.emit;\n    var _useLocale = useLocale(),\n      t = _useLocale.t;\n    var nsUpload = useNamespace(\"upload\");\n    var nsIcon = useNamespace(\"icon\");\n    var nsList = useNamespace(\"list\");\n    var disabled = useFormDisabled();\n    var focusing = ref(false);\n    var handleRemove = function handleRemove(file) {\n      emit(\"remove\", file);\n    };\n    return function (_ctx, _cache) {\n      return openBlock(), createBlock(TransitionGroup, {\n        tag: \"ul\",\n        \"class\": normalizeClass([unref(nsUpload).b(\"list\"), unref(nsUpload).bm(\"list\", _ctx.listType), unref(nsUpload).is(\"disabled\", unref(disabled))]),\n        name: unref(nsList).b()\n      }, {\n        \"default\": withCtx(function () {\n          return [(openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.files, function (file) {\n            return openBlock(), createElementBlock(\"li\", {\n              key: file.uid || file.name,\n              \"class\": normalizeClass([unref(nsUpload).be(\"list\", \"item\"), unref(nsUpload).is(file.status), {\n                focusing: focusing.value\n              }]),\n              tabindex: \"0\",\n              onKeydown: withKeys(function ($event) {\n                return !unref(disabled) && handleRemove(file);\n              }, [\"delete\"]),\n              onFocus: _cache[0] || (_cache[0] = function ($event) {\n                return focusing.value = true;\n              }),\n              onBlur: _cache[1] || (_cache[1] = function ($event) {\n                return focusing.value = false;\n              }),\n              onClick: _cache[2] || (_cache[2] = function ($event) {\n                return focusing.value = false;\n              })\n            }, [renderSlot(_ctx.$slots, \"default\", {\n              file: file\n            }, function () {\n              return [_ctx.listType === \"picture\" || file.status !== \"uploading\" && _ctx.listType === \"picture-card\" ? (openBlock(), createElementBlock(\"img\", {\n                key: 0,\n                \"class\": normalizeClass(unref(nsUpload).be(\"list\", \"item-thumbnail\")),\n                src: file.url,\n                alt: \"\"\n              }, null, 10, _hoisted_2)) : createCommentVNode(\"v-if\", true), file.status === \"uploading\" || _ctx.listType !== \"picture-card\" ? (openBlock(), createElementBlock(\"div\", {\n                key: 1,\n                \"class\": normalizeClass(unref(nsUpload).be(\"list\", \"item-info\"))\n              }, [createElementVNode(\"a\", {\n                \"class\": normalizeClass(unref(nsUpload).be(\"list\", \"item-name\")),\n                onClick: withModifiers(function ($event) {\n                  return _ctx.handlePreview(file);\n                }, [\"prevent\"])\n              }, [createVNode(unref(ElIcon), {\n                \"class\": normalizeClass(unref(nsIcon).m(\"document\"))\n              }, {\n                \"default\": withCtx(function () {\n                  return [createVNode(unref(Document))];\n                }),\n                _: 1\n              }, 8, [\"class\"]), createElementVNode(\"span\", {\n                \"class\": normalizeClass(unref(nsUpload).be(\"list\", \"item-file-name\")),\n                title: file.name\n              }, toDisplayString(file.name), 11, _hoisted_4)], 10, _hoisted_3), file.status === \"uploading\" ? (openBlock(), createBlock(unref(ElProgress), {\n                key: 0,\n                type: _ctx.listType === \"picture-card\" ? \"circle\" : \"line\",\n                \"stroke-width\": _ctx.listType === \"picture-card\" ? 6 : 2,\n                percentage: Number(file.percentage),\n                style: normalizeStyle(_ctx.listType === \"picture-card\" ? \"\" : \"margin-top: 0.5rem\")\n              }, null, 8, [\"type\", \"stroke-width\", \"percentage\", \"style\"])) : createCommentVNode(\"v-if\", true)], 2)) : createCommentVNode(\"v-if\", true), createElementVNode(\"label\", {\n                \"class\": normalizeClass(unref(nsUpload).be(\"list\", \"item-status-label\"))\n              }, [_ctx.listType === \"text\" ? (openBlock(), createBlock(unref(ElIcon), {\n                key: 0,\n                \"class\": normalizeClass([unref(nsIcon).m(\"upload-success\"), unref(nsIcon).m(\"circle-check\")])\n              }, {\n                \"default\": withCtx(function () {\n                  return [createVNode(unref(CircleCheck))];\n                }),\n                _: 1\n              }, 8, [\"class\"])) : [\"picture-card\", \"picture\"].includes(_ctx.listType) ? (openBlock(), createBlock(unref(ElIcon), {\n                key: 1,\n                \"class\": normalizeClass([unref(nsIcon).m(\"upload-success\"), unref(nsIcon).m(\"check\")])\n              }, {\n                \"default\": withCtx(function () {\n                  return [createVNode(unref(Check))];\n                }),\n                _: 1\n              }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true)], 2), !unref(disabled) ? (openBlock(), createBlock(unref(ElIcon), {\n                key: 2,\n                \"class\": normalizeClass(unref(nsIcon).m(\"close\")),\n                onClick: function onClick($event) {\n                  return handleRemove(file);\n                }\n              }, {\n                \"default\": withCtx(function () {\n                  return [createVNode(unref(Close))];\n                }),\n                _: 2\n              }, 1032, [\"class\", \"onClick\"])) : createCommentVNode(\"v-if\", true), createCommentVNode(\" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn\"), createCommentVNode(\" This is a bug which needs to be fixed \"), createCommentVNode(\" TODO: Fix the incorrect navigation interaction \"), !unref(disabled) ? (openBlock(), createElementBlock(\"i\", {\n                key: 3,\n                \"class\": normalizeClass(unref(nsIcon).m(\"close-tip\"))\n              }, toDisplayString(unref(t)(\"el.upload.deleteTip\")), 3)) : createCommentVNode(\"v-if\", true), _ctx.listType === \"picture-card\" ? (openBlock(), createElementBlock(\"span\", {\n                key: 4,\n                \"class\": normalizeClass(unref(nsUpload).be(\"list\", \"item-actions\"))\n              }, [createElementVNode(\"span\", {\n                \"class\": normalizeClass(unref(nsUpload).be(\"list\", \"item-preview\")),\n                onClick: function onClick($event) {\n                  return _ctx.handlePreview(file);\n                }\n              }, [createVNode(unref(ElIcon), {\n                \"class\": normalizeClass(unref(nsIcon).m(\"zoom-in\"))\n              }, {\n                \"default\": withCtx(function () {\n                  return [createVNode(unref(ZoomIn))];\n                }),\n                _: 1\n              }, 8, [\"class\"])], 10, _hoisted_5), !unref(disabled) ? (openBlock(), createElementBlock(\"span\", {\n                key: 0,\n                \"class\": normalizeClass(unref(nsUpload).be(\"list\", \"item-delete\")),\n                onClick: function onClick($event) {\n                  return handleRemove(file);\n                }\n              }, [createVNode(unref(ElIcon), {\n                \"class\": normalizeClass(unref(nsIcon).m(\"delete\"))\n              }, {\n                \"default\": withCtx(function () {\n                  return [createVNode(unref(Delete))];\n                }),\n                _: 1\n              }, 8, [\"class\"])], 10, _hoisted_6)) : createCommentVNode(\"v-if\", true)], 2)) : createCommentVNode(\"v-if\", true)];\n            })], 42, _hoisted_1);\n          }), 128)), renderSlot(_ctx.$slots, \"append\")];\n        }),\n        _: 3\n      }, 8, [\"class\", \"name\"]);\n    };\n  }\n}));\nvar UploadList = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue\"]]);\nexport { UploadList as default };","map":{"version":3,"names":["name","_useLocale","useLocale","t","nsUpload","useNamespace","nsIcon","nsList","disabled","useFormDisabled","focusing","ref","handleRemove","file","emit"],"sources":["../../../../../../packages/components/upload/src/upload-list.vue"],"sourcesContent":["<template>\n  <transition-group\n    tag=\"ul\"\n    :class=\"[\n      nsUpload.b('list'),\n      nsUpload.bm('list', listType),\n      nsUpload.is('disabled', disabled),\n    ]\"\n    :name=\"nsList.b()\"\n  >\n    <li\n      v-for=\"file in files\"\n      :key=\"file.uid || file.name\"\n      :class=\"[\n        nsUpload.be('list', 'item'),\n        nsUpload.is(file.status),\n        { focusing },\n      ]\"\n      tabindex=\"0\"\n      @keydown.delete=\"!disabled && handleRemove(file)\"\n      @focus=\"focusing = true\"\n      @blur=\"focusing = false\"\n      @click=\"focusing = false\"\n    >\n      <slot :file=\"file\">\n        <img\n          v-if=\"\n            listType === 'picture' ||\n            (file.status !== 'uploading' && listType === 'picture-card')\n          \"\n          :class=\"nsUpload.be('list', 'item-thumbnail')\"\n          :src=\"file.url\"\n          alt=\"\"\n        />\n        <div\n          v-if=\"file.status === 'uploading' || listType !== 'picture-card'\"\n          :class=\"nsUpload.be('list', 'item-info')\"\n        >\n          <a\n            :class=\"nsUpload.be('list', 'item-name')\"\n            @click.prevent=\"handlePreview(file)\"\n          >\n            <el-icon :class=\"nsIcon.m('document')\">\n              <Document />\n            </el-icon>\n            <span\n              :class=\"nsUpload.be('list', 'item-file-name')\"\n              :title=\"file.name\"\n            >\n              {{ file.name }}\n            </span>\n          </a>\n          <el-progress\n            v-if=\"file.status === 'uploading'\"\n            :type=\"listType === 'picture-card' ? 'circle' : 'line'\"\n            :stroke-width=\"listType === 'picture-card' ? 6 : 2\"\n            :percentage=\"Number(file.percentage)\"\n            :style=\"listType === 'picture-card' ? '' : 'margin-top: 0.5rem'\"\n          />\n        </div>\n\n        <label :class=\"nsUpload.be('list', 'item-status-label')\">\n          <el-icon\n            v-if=\"listType === 'text'\"\n            :class=\"[nsIcon.m('upload-success'), nsIcon.m('circle-check')]\"\n          >\n            <circle-check />\n          </el-icon>\n          <el-icon\n            v-else-if=\"['picture-card', 'picture'].includes(listType)\"\n            :class=\"[nsIcon.m('upload-success'), nsIcon.m('check')]\"\n          >\n            <Check />\n          </el-icon>\n        </label>\n        <el-icon\n          v-if=\"!disabled\"\n          :class=\"nsIcon.m('close')\"\n          @click=\"handleRemove(file)\"\n        >\n          <Close />\n        </el-icon>\n        <!-- Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn-->\n        <!-- This is a bug which needs to be fixed -->\n        <!-- TODO: Fix the incorrect navigation interaction -->\n        <i v-if=\"!disabled\" :class=\"nsIcon.m('close-tip')\">{{\n          t('el.upload.deleteTip')\n        }}</i>\n        <span\n          v-if=\"listType === 'picture-card'\"\n          :class=\"nsUpload.be('list', 'item-actions')\"\n        >\n          <span\n            :class=\"nsUpload.be('list', 'item-preview')\"\n            @click=\"handlePreview(file)\"\n          >\n            <el-icon :class=\"nsIcon.m('zoom-in')\"><zoom-in /></el-icon>\n          </span>\n          <span\n            v-if=\"!disabled\"\n            :class=\"nsUpload.be('list', 'item-delete')\"\n            @click=\"handleRemove(file)\"\n          >\n            <el-icon :class=\"nsIcon.m('delete')\">\n              <Delete />\n            </el-icon>\n          </span>\n        </span>\n      </slot>\n    </li>\n    <slot name=\"append\" />\n  </transition-group>\n</template>\n<script lang=\"ts\" setup>\nimport { ref } from 'vue'\nimport { ElIcon } from '@element-plus/components/icon'\nimport {\n  Check,\n  CircleCheck,\n  Close,\n  Delete,\n  Document,\n  ZoomIn,\n} from '@element-plus/icons-vue'\nimport { useLocale, useNamespace } from '@element-plus/hooks'\nimport ElProgress from '@element-plus/components/progress'\nimport { useFormDisabled } from '@element-plus/components/form'\n\nimport { uploadListEmits, uploadListProps } from './upload-list'\nimport type { UploadFile } from './upload'\n\ndefineOptions({\n  name: 'ElUploadList',\n})\n\ndefineProps(uploadListProps)\nconst emit = defineEmits(uploadListEmits)\n\nconst { t } = useLocale()\nconst nsUpload = useNamespace('upload')\nconst nsIcon = useNamespace('icon')\nconst nsList = useNamespace('list')\nconst disabled = useFormDisabled()\n\nconst focusing = ref(false)\n\nconst handleRemove = (file: UploadFile) => {\n  emit('remove', file)\n}\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;iCAmIc;EACZA,IAAM;AACR;;;;;;IAKM,IAAAC,UAAA,GAAQC,SAAU;MAAhBC,CAAA,GAAAF,UAAA,CAAAE,CAAA;IACF,IAAAC,QAAA,GAAWC,YAAA,CAAa,QAAQ;IAChC,IAAAC,MAAA,GAASD,YAAA,CAAa,MAAM;IAC5B,IAAAE,MAAA,GAASF,YAAA,CAAa,MAAM;IAClC,IAAMG,QAAA,GAAWC,eAAgB;IAE3B,IAAAC,QAAA,GAAWC,GAAA,CAAI,KAAK;IAEpB,IAAAC,YAAA,GAAe,SAAfA,aAAgBC,IAAqB;MACzCC,IAAA,CAAK,UAAUD,IAAI;IAAA,CACrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}