{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { computed, unref } from 'vue';\nimport '../../../../utils/index.mjs';\nimport { sum, enforceUnit } from '../utils.mjs';\nimport { isNumber } from '../../../../utils/types.mjs';\nimport { addUnit } from '../../../../utils/dom/style.mjs';\nvar useStyles = function useStyles(props, _ref) {\n  var columnsTotalWidth = _ref.columnsTotalWidth,\n    data = _ref.data,\n    fixedColumnsOnLeft = _ref.fixedColumnsOnLeft,\n    fixedColumnsOnRight = _ref.fixedColumnsOnRight;\n  var bodyWidth = computed(function () {\n    var fixed = props.fixed,\n      width = props.width,\n      vScrollbarSize = props.vScrollbarSize;\n    var ret = width - vScrollbarSize;\n    return fixed ? Math.max(Math.round(unref(columnsTotalWidth)), ret) : ret;\n  });\n  var headerWidth = computed(function () {\n    return unref(bodyWidth) + (props.fixed ? props.vScrollbarSize : 0);\n  });\n  var mainTableHeight = computed(function () {\n    var _props$height = props.height,\n      height = _props$height === void 0 ? 0 : _props$height,\n      _props$maxHeight = props.maxHeight,\n      maxHeight = _props$maxHeight === void 0 ? 0 : _props$maxHeight,\n      footerHeight2 = props.footerHeight,\n      hScrollbarSize = props.hScrollbarSize;\n    if (maxHeight > 0) {\n      var _fixedRowsHeight = unref(fixedRowsHeight);\n      var _rowsHeight = unref(rowsHeight);\n      var _headerHeight = unref(headerHeight);\n      var total = _headerHeight + _fixedRowsHeight + _rowsHeight + hScrollbarSize;\n      return Math.min(total, maxHeight - footerHeight2);\n    }\n    return height - footerHeight2;\n  });\n  var rowsHeight = computed(function () {\n    var rowHeight = props.rowHeight,\n      estimatedRowHeight = props.estimatedRowHeight;\n    var _data = unref(data);\n    if (isNumber(estimatedRowHeight)) {\n      return _data.length * estimatedRowHeight;\n    }\n    return _data.length * rowHeight;\n  });\n  var fixedTableHeight = computed(function () {\n    var maxHeight = props.maxHeight;\n    var tableHeight = unref(mainTableHeight);\n    if (isNumber(maxHeight) && maxHeight > 0) return tableHeight;\n    var totalHeight = unref(rowsHeight) + unref(headerHeight) + unref(fixedRowsHeight);\n    return Math.min(tableHeight, totalHeight);\n  });\n  var mapColumn = function mapColumn(column) {\n    return column.width;\n  };\n  var leftTableWidth = computed(function () {\n    return sum(unref(fixedColumnsOnLeft).map(mapColumn));\n  });\n  var rightTableWidth = computed(function () {\n    return sum(unref(fixedColumnsOnRight).map(mapColumn));\n  });\n  var headerHeight = computed(function () {\n    return sum(props.headerHeight);\n  });\n  var fixedRowsHeight = computed(function () {\n    var _a;\n    return (((_a = props.fixedData) == null ? void 0 : _a.length) || 0) * props.rowHeight;\n  });\n  var windowHeight = computed(function () {\n    return unref(mainTableHeight) - unref(headerHeight) - unref(fixedRowsHeight);\n  });\n  var rootStyle = computed(function () {\n    var _props$style = props.style,\n      style = _props$style === void 0 ? {} : _props$style,\n      height = props.height,\n      width = props.width;\n    return enforceUnit(_objectSpread(_objectSpread({}, style), {}, {\n      height: height,\n      width: width\n    }));\n  });\n  var footerHeight = computed(function () {\n    return enforceUnit({\n      height: props.footerHeight\n    });\n  });\n  var emptyStyle = computed(function () {\n    return {\n      top: addUnit(unref(headerHeight)),\n      bottom: addUnit(props.footerHeight),\n      width: addUnit(props.width)\n    };\n  });\n  return {\n    bodyWidth: bodyWidth,\n    fixedTableHeight: fixedTableHeight,\n    mainTableHeight: mainTableHeight,\n    leftTableWidth: leftTableWidth,\n    rightTableWidth: rightTableWidth,\n    headerWidth: headerWidth,\n    rowsHeight: rowsHeight,\n    windowHeight: windowHeight,\n    footerHeight: footerHeight,\n    emptyStyle: emptyStyle,\n    rootStyle: rootStyle,\n    headerHeight: headerHeight\n  };\n};\nexport { useStyles };","map":{"version":3,"names":["useStyles","props","_ref","columnsTotalWidth","data","fixedColumnsOnLeft","fixedColumnsOnRight","bodyWidth","computed","fixed","width","vScrollbarSize","ret","Math","max","round","unref","headerWidth","mainTableHeight","_props$height","height","_props$maxHeight","maxHeight","footerHeight2","footerHeight","hScrollbarSize","_fixedRowsHeight","fixedRowsHeight","_rowsHeight","rowsHeight","_headerHeight","headerHeight","total","min","rowHeight","estimatedRowHeight","_data","isNumber","length","fixedTableHeight","tableHeight","totalHeight","mapColumn","column","leftTableWidth","sum","map","rightTableWidth","_a","fixedData","windowHeight","rootStyle","_props$style","style","enforceUnit","_objectSpread","emptyStyle","top","addUnit","bottom"],"sources":["../../../../../../../packages/components/table-v2/src/composables/use-styles.ts"],"sourcesContent":["import { computed, unref } from 'vue'\nimport { addUnit, isNumber } from '@element-plus/utils'\nimport { enforceUnit, sum } from '../utils'\n\nimport type { CSSProperties } from 'vue'\nimport type { TableV2Props } from '../table'\nimport type { UseColumnsReturn } from './use-columns'\nimport type { UseDataReturn } from './use-data'\n\ntype UseStyleProps = {\n  columnsTotalWidth: UseColumnsReturn['columnsTotalWidth']\n  data: UseDataReturn['data']\n  fixedColumnsOnLeft: UseColumnsReturn['fixedColumnsOnLeft']\n  fixedColumnsOnRight: UseColumnsReturn['fixedColumnsOnRight']\n}\n\nexport const useStyles = (\n  props: TableV2Props,\n  {\n    columnsTotalWidth,\n    data,\n    fixedColumnsOnLeft,\n    fixedColumnsOnRight,\n  }: UseStyleProps\n) => {\n  const bodyWidth = computed(() => {\n    const { fixed, width, vScrollbarSize } = props\n    const ret = width - vScrollbarSize\n    return fixed ? Math.max(Math.round(unref(columnsTotalWidth)), ret) : ret\n  })\n\n  const headerWidth = computed(\n    () => unref(bodyWidth) + (props.fixed ? props.vScrollbarSize : 0)\n  )\n\n  const mainTableHeight = computed(() => {\n    const { height = 0, maxHeight = 0, footerHeight, hScrollbarSize } = props\n\n    if (maxHeight > 0) {\n      const _fixedRowsHeight = unref(fixedRowsHeight)\n      const _rowsHeight = unref(rowsHeight)\n      const _headerHeight = unref(headerHeight)\n      const total =\n        _headerHeight + _fixedRowsHeight + _rowsHeight + hScrollbarSize\n\n      return Math.min(total, maxHeight - footerHeight)\n    }\n\n    return height - footerHeight\n  })\n\n  const rowsHeight = computed(() => {\n    const { rowHeight, estimatedRowHeight } = props\n    const _data = unref(data)\n    if (isNumber(estimatedRowHeight)) {\n      return _data.length * estimatedRowHeight\n    }\n\n    return _data.length * rowHeight\n  })\n\n  const fixedTableHeight = computed(() => {\n    const { maxHeight } = props\n    const tableHeight = unref(mainTableHeight)\n    if (isNumber(maxHeight) && maxHeight > 0) return tableHeight\n\n    const totalHeight =\n      unref(rowsHeight) + unref(headerHeight) + unref(fixedRowsHeight)\n\n    return Math.min(tableHeight, totalHeight)\n  })\n\n  const mapColumn = (column: TableV2Props['columns'][number]) => column.width\n\n  const leftTableWidth = computed(() =>\n    sum(unref(fixedColumnsOnLeft).map(mapColumn))\n  )\n\n  const rightTableWidth = computed(() =>\n    sum(unref(fixedColumnsOnRight).map(mapColumn))\n  )\n\n  const headerHeight = computed(() => sum(props.headerHeight))\n\n  const fixedRowsHeight = computed(() => {\n    return (props.fixedData?.length || 0) * props.rowHeight\n  })\n\n  const windowHeight = computed(() => {\n    return unref(mainTableHeight) - unref(headerHeight) - unref(fixedRowsHeight)\n  })\n\n  const rootStyle = computed<CSSProperties>(() => {\n    const { style = {}, height, width } = props\n    return enforceUnit({\n      ...style,\n      height,\n      width,\n    })\n  })\n\n  const footerHeight = computed(() =>\n    enforceUnit({ height: props.footerHeight })\n  )\n\n  const emptyStyle = computed<CSSProperties>(() => ({\n    top: addUnit(unref(headerHeight)),\n    bottom: addUnit(props.footerHeight),\n    width: addUnit(props.width),\n  }))\n\n  return {\n    bodyWidth,\n    fixedTableHeight,\n    mainTableHeight,\n    leftTableWidth,\n    rightTableWidth,\n    headerWidth,\n    rowsHeight,\n    windowHeight,\n    footerHeight,\n    emptyStyle,\n    rootStyle,\n    headerHeight,\n  }\n}\n\nexport type UseStyleReturn = ReturnType<typeof useStyles>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}