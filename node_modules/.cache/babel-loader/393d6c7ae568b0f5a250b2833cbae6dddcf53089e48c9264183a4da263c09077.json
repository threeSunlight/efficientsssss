{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { defineComponent, getCurrentInstance, ref, computed, nextTick, watch, watchEffect, provide, reactive, onMounted, h } from 'vue';\nimport { useResizeObserver } from '@vueuse/core';\nimport { isNil } from 'lodash-unified';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { More } from '@element-plus/icons-vue';\nimport '../../../utils/index.mjs';\nimport '../../../hooks/index.mjs';\nimport Menu$1 from './utils/menu-bar.mjs';\nimport ElMenuCollapseTransition from './menu-collapse-transition.mjs';\nimport SubMenu from './sub-menu.mjs';\nimport { useMenuCssVar } from './use-menu-css-var.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { mutable } from '../../../utils/typescript.mjs';\nimport { isString, isObject } from '@vue/shared';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { flattedChildren } from '../../../utils/vue/vnode.mjs';\nvar menuProps = buildProps({\n  mode: {\n    type: String,\n    values: [\"horizontal\", \"vertical\"],\n    \"default\": \"vertical\"\n  },\n  defaultActive: {\n    type: String,\n    \"default\": \"\"\n  },\n  defaultOpeneds: {\n    type: definePropType(Array),\n    \"default\": function _default() {\n      return mutable([]);\n    }\n  },\n  uniqueOpened: Boolean,\n  router: Boolean,\n  menuTrigger: {\n    type: String,\n    values: [\"hover\", \"click\"],\n    \"default\": \"hover\"\n  },\n  collapse: Boolean,\n  backgroundColor: String,\n  textColor: String,\n  activeTextColor: String,\n  collapseTransition: {\n    type: Boolean,\n    \"default\": true\n  },\n  ellipsis: {\n    type: Boolean,\n    \"default\": true\n  },\n  popperEffect: {\n    type: String,\n    values: [\"dark\", \"light\"],\n    \"default\": \"dark\"\n  }\n});\nvar checkIndexPath = function checkIndexPath(indexPath) {\n  return Array.isArray(indexPath) && indexPath.every(function (path) {\n    return isString(path);\n  });\n};\nvar menuEmits = {\n  close: function close(index, indexPath) {\n    return isString(index) && checkIndexPath(indexPath);\n  },\n  open: function open(index, indexPath) {\n    return isString(index) && checkIndexPath(indexPath);\n  },\n  select: function select(index, indexPath, item, routerResult) {\n    return isString(index) && checkIndexPath(indexPath) && isObject(item) && (routerResult === void 0 || routerResult instanceof Promise);\n  }\n};\nvar Menu = defineComponent({\n  name: \"ElMenu\",\n  props: menuProps,\n  emits: menuEmits,\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots,\n      expose = _ref.expose;\n    var instance = getCurrentInstance();\n    var router = instance.appContext.config.globalProperties.$router;\n    var menu = ref();\n    var nsMenu = useNamespace(\"menu\");\n    var nsSubMenu = useNamespace(\"sub-menu\");\n    var sliceIndex = ref(-1);\n    var openedMenus = ref(props.defaultOpeneds && !props.collapse ? props.defaultOpeneds.slice(0) : []);\n    var activeIndex = ref(props.defaultActive);\n    var items = ref({});\n    var subMenus = ref({});\n    var isMenuPopup = computed(function () {\n      return props.mode === \"horizontal\" || props.mode === \"vertical\" && props.collapse;\n    });\n    var initMenu = function initMenu() {\n      var activeItem = activeIndex.value && items.value[activeIndex.value];\n      if (!activeItem || props.mode === \"horizontal\" || props.collapse) return;\n      var indexPath = activeItem.indexPath;\n      indexPath.forEach(function (index) {\n        var subMenu = subMenus.value[index];\n        subMenu && openMenu(index, subMenu.indexPath);\n      });\n    };\n    var openMenu = function openMenu(index, indexPath) {\n      if (openedMenus.value.includes(index)) return;\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter(function (index2) {\n          return indexPath.includes(index2);\n        });\n      }\n      openedMenus.value.push(index);\n      emit(\"open\", index, indexPath);\n    };\n    var close = function close(index) {\n      var i = openedMenus.value.indexOf(index);\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1);\n      }\n    };\n    var closeMenu = function closeMenu(index, indexPath) {\n      close(index);\n      emit(\"close\", index, indexPath);\n    };\n    var handleSubMenuClick = function handleSubMenuClick(_ref2) {\n      var index = _ref2.index,\n        indexPath = _ref2.indexPath;\n      var isOpened = openedMenus.value.includes(index);\n      if (isOpened) {\n        closeMenu(index, indexPath);\n      } else {\n        openMenu(index, indexPath);\n      }\n    };\n    var handleMenuItemClick = function handleMenuItemClick(menuItem) {\n      if (props.mode === \"horizontal\" || props.collapse) {\n        openedMenus.value = [];\n      }\n      var index = menuItem.index,\n        indexPath = menuItem.indexPath;\n      if (isNil(index) || isNil(indexPath)) return;\n      if (props.router && router) {\n        var route = menuItem.route || index;\n        var routerResult = router.push(route).then(function (res) {\n          if (!res) activeIndex.value = index;\n          return res;\n        });\n        emit(\"select\", index, indexPath, {\n          index: index,\n          indexPath: indexPath,\n          route: route\n        }, routerResult);\n      } else {\n        activeIndex.value = index;\n        emit(\"select\", index, indexPath, {\n          index: index,\n          indexPath: indexPath\n        });\n      }\n    };\n    var updateActiveIndex = function updateActiveIndex(val) {\n      var itemsInData = items.value;\n      var item = itemsInData[val] || activeIndex.value && itemsInData[activeIndex.value] || itemsInData[props.defaultActive];\n      if (item) {\n        activeIndex.value = item.index;\n      } else {\n        activeIndex.value = val;\n      }\n    };\n    var calcSliceIndex = function calcSliceIndex() {\n      var _a, _b;\n      if (!menu.value) return -1;\n      var items2 = Array.from((_b = (_a = menu.value) == null ? void 0 : _a.childNodes) != null ? _b : []).filter(function (item) {\n        return item.nodeName !== \"#comment\" && (item.nodeName !== \"#text\" || item.nodeValue);\n      });\n      var moreItemWidth = 64;\n      var paddingLeft = Number.parseInt(getComputedStyle(menu.value).paddingLeft, 10);\n      var paddingRight = Number.parseInt(getComputedStyle(menu.value).paddingRight, 10);\n      var menuWidth = menu.value.clientWidth - paddingLeft - paddingRight;\n      var calcWidth = 0;\n      var sliceIndex2 = 0;\n      items2.forEach(function (item, index) {\n        calcWidth += item.offsetWidth || 0;\n        if (calcWidth <= menuWidth - moreItemWidth) {\n          sliceIndex2 = index + 1;\n        }\n      });\n      return sliceIndex2 === items2.length ? -1 : sliceIndex2;\n    };\n    var debounce = function debounce(fn) {\n      var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 33.34;\n      var timmer;\n      return function () {\n        timmer && clearTimeout(timmer);\n        timmer = setTimeout(function () {\n          fn();\n        }, wait);\n      };\n    };\n    var isFirstTimeRender = true;\n    var handleResize = function handleResize() {\n      var callback = function callback() {\n        sliceIndex.value = -1;\n        nextTick(function () {\n          sliceIndex.value = calcSliceIndex();\n        });\n      };\n      isFirstTimeRender ? callback() : debounce(callback)();\n      isFirstTimeRender = false;\n    };\n    watch(function () {\n      return props.defaultActive;\n    }, function (currentActive) {\n      if (!items.value[currentActive]) {\n        activeIndex.value = \"\";\n      }\n      updateActiveIndex(currentActive);\n    });\n    watch(function () {\n      return props.collapse;\n    }, function (value) {\n      if (value) openedMenus.value = [];\n    });\n    watch(items.value, initMenu);\n    var resizeStopper;\n    watchEffect(function () {\n      if (props.mode === \"horizontal\" && props.ellipsis) resizeStopper = useResizeObserver(menu, handleResize).stop;else resizeStopper == null ? void 0 : resizeStopper();\n    });\n    {\n      var addSubMenu = function addSubMenu(item) {\n        subMenus.value[item.index] = item;\n      };\n      var removeSubMenu = function removeSubMenu(item) {\n        delete subMenus.value[item.index];\n      };\n      var addMenuItem = function addMenuItem(item) {\n        items.value[item.index] = item;\n      };\n      var removeMenuItem = function removeMenuItem(item) {\n        delete items.value[item.index];\n      };\n      provide(\"rootMenu\", reactive({\n        props: props,\n        openedMenus: openedMenus,\n        items: items,\n        subMenus: subMenus,\n        activeIndex: activeIndex,\n        isMenuPopup: isMenuPopup,\n        addMenuItem: addMenuItem,\n        removeMenuItem: removeMenuItem,\n        addSubMenu: addSubMenu,\n        removeSubMenu: removeSubMenu,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        handleMenuItemClick: handleMenuItemClick,\n        handleSubMenuClick: handleSubMenuClick\n      }));\n      provide(\"subMenu:\".concat(instance.uid), {\n        addSubMenu: addSubMenu,\n        removeSubMenu: removeSubMenu,\n        mouseInChild: ref(false),\n        level: 0\n      });\n    }\n    onMounted(function () {\n      if (props.mode === \"horizontal\") {\n        new Menu$1(instance.vnode.el, nsMenu.namespace.value);\n      }\n    });\n    {\n      var open = function open(index) {\n        var indexPath = subMenus.value[index].indexPath;\n        indexPath.forEach(function (i) {\n          return openMenu(i, indexPath);\n        });\n      };\n      expose({\n        open: open,\n        close: close,\n        handleResize: handleResize\n      });\n    }\n    return function () {\n      var _class;\n      var _a, _b;\n      var slot = (_b = (_a = slots[\"default\"]) == null ? void 0 : _a.call(slots)) != null ? _b : [];\n      var vShowMore = [];\n      if (props.mode === \"horizontal\" && menu.value) {\n        var originalSlot = flattedChildren(slot);\n        var slotDefault = sliceIndex.value === -1 ? originalSlot : originalSlot.slice(0, sliceIndex.value);\n        var slotMore = sliceIndex.value === -1 ? [] : originalSlot.slice(sliceIndex.value);\n        if ((slotMore == null ? void 0 : slotMore.length) && props.ellipsis) {\n          slot = slotDefault;\n          vShowMore.push(h(SubMenu, {\n            index: \"sub-menu-more\",\n            \"class\": nsSubMenu.e(\"hide-arrow\")\n          }, {\n            title: function title() {\n              return h(ElIcon, {\n                \"class\": nsSubMenu.e(\"icon-more\")\n              }, {\n                \"default\": function _default() {\n                  return h(More);\n                }\n              });\n            },\n            \"default\": function _default() {\n              return slotMore;\n            }\n          }));\n        }\n      }\n      var ulStyle = useMenuCssVar(props, 0);\n      var vMenu = h(\"ul\", {\n        key: String(props.collapse),\n        role: \"menubar\",\n        ref: menu,\n        style: ulStyle.value,\n        \"class\": (_class = {}, _defineProperty(_class, nsMenu.b(), true), _defineProperty(_class, nsMenu.m(props.mode), true), _defineProperty(_class, nsMenu.m(\"collapse\"), props.collapse), _class)\n      }, [].concat(_toConsumableArray(slot), vShowMore));\n      if (props.collapseTransition && props.mode === \"vertical\") {\n        return h(ElMenuCollapseTransition, function () {\n          return vMenu;\n        });\n      }\n      return vMenu;\n    };\n  }\n});\nexport { Menu as default, menuEmits, menuProps };","map":{"version":3,"names":["menuProps","buildProps","mode","type","String","values","defaultActive","defaultOpeneds","definePropType","Array","_default","mutable","uniqueOpened","Boolean","router","menuTrigger","collapse","backgroundColor","textColor","activeTextColor","collapseTransition","ellipsis","popperEffect","checkIndexPath","indexPath","isArray","every","path","isString","menuEmits","close","index","open","select","item","routerResult","isObject","Promise","Menu","defineComponent","name","props","emits","setup","_ref","emit","slots","expose","instance","getCurrentInstance","appContext","config","globalProperties","$router","menu","ref","nsMenu","useNamespace","nsSubMenu","sliceIndex","openedMenus","slice","activeIndex","items","subMenus","isMenuPopup","computed","initMenu","activeItem","value","forEach","subMenu","openMenu","includes","filter","index2","push","i","indexOf","splice","closeMenu","handleSubMenuClick","_ref2","isOpened","handleMenuItemClick","menuItem","isNil","route","then","res","updateActiveIndex","val","itemsInData","calcSliceIndex","_a","_b","items2","from","childNodes","nodeName","nodeValue","moreItemWidth","paddingLeft","Number","parseInt","getComputedStyle","paddingRight","menuWidth","clientWidth","calcWidth","sliceIndex2","offsetWidth","length","debounce","fn","wait","arguments","undefined","timmer","clearTimeout","setTimeout","isFirstTimeRender","handleResize","callback","nextTick","watch","currentActive","resizeStopper","watchEffect","useResizeObserver","stop","addSubMenu","removeSubMenu","addMenuItem","removeMenuItem","provide","reactive","concat","uid","mouseInChild","level","onMounted","Menu$1","vnode","el","namespace","_class","slot","call","vShowMore","originalSlot","flattedChildren","slotDefault","slotMore","h","SubMenu","e","title","ElIcon","More","ulStyle","useMenuCssVar","vMenu","key","role","style","_defineProperty","b","m","_toConsumableArray","ElMenuCollapseTransition"],"sources":["../../../../../../packages/components/menu/src/menu.ts"],"sourcesContent":["import {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  h,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  watch,\n  watchEffect,\n} from 'vue'\nimport { useResizeObserver } from '@vueuse/core'\nimport { isNil } from 'lodash-unified'\nimport ElIcon from '@element-plus/components/icon'\nimport { More } from '@element-plus/icons-vue'\nimport {\n  buildProps,\n  definePropType,\n  flattedChildren,\n  isObject,\n  isString,\n  mutable,\n} from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport Menubar from './utils/menu-bar'\nimport ElMenuCollapseTransition from './menu-collapse-transition.vue'\nimport ElSubMenu from './sub-menu'\nimport { useMenuCssVar } from './use-menu-css-var'\n\nimport type { MenuItemClicked, MenuProvider, SubMenuProvider } from './types'\nimport type { NavigationFailure, Router } from 'vue-router'\nimport type { ExtractPropTypes, VNode, VNodeArrayChildren } from 'vue'\nimport type { UseResizeObserverReturn } from '@vueuse/core'\n\nexport const menuProps = buildProps({\n  mode: {\n    type: String,\n    values: ['horizontal', 'vertical'],\n    default: 'vertical',\n  },\n  defaultActive: {\n    type: String,\n    default: '',\n  },\n  defaultOpeneds: {\n    type: definePropType<string[]>(Array),\n    default: () => mutable([] as const),\n  },\n  uniqueOpened: Boolean,\n  router: Boolean,\n  menuTrigger: {\n    type: String,\n    values: ['hover', 'click'],\n    default: 'hover',\n  },\n  collapse: Boolean,\n  backgroundColor: String,\n  textColor: String,\n  activeTextColor: String,\n  collapseTransition: {\n    type: Boolean,\n    default: true,\n  },\n  ellipsis: {\n    type: Boolean,\n    default: true,\n  },\n  popperEffect: {\n    type: String,\n    values: ['dark', 'light'],\n    default: 'dark',\n  },\n} as const)\nexport type MenuProps = ExtractPropTypes<typeof menuProps>\n\nconst checkIndexPath = (indexPath: unknown): indexPath is string[] =>\n  Array.isArray(indexPath) && indexPath.every((path) => isString(path))\n\nexport const menuEmits = {\n  close: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  open: (index: string, indexPath: string[]) =>\n    isString(index) && checkIndexPath(indexPath),\n\n  select: (\n    index: string,\n    indexPath: string[],\n    item: MenuItemClicked,\n    routerResult?: Promise<void | NavigationFailure>\n  ) =>\n    isString(index) &&\n    checkIndexPath(indexPath) &&\n    isObject(item) &&\n    (routerResult === undefined || routerResult instanceof Promise),\n}\nexport type MenuEmits = typeof menuEmits\n\nexport default defineComponent({\n  name: 'ElMenu',\n\n  props: menuProps,\n  emits: menuEmits,\n\n  setup(props, { emit, slots, expose }) {\n    const instance = getCurrentInstance()!\n    const router = instance.appContext.config.globalProperties.$router as Router\n    const menu = ref<HTMLUListElement>()\n    const nsMenu = useNamespace('menu')\n    const nsSubMenu = useNamespace('sub-menu')\n\n    // data\n    const sliceIndex = ref(-1)\n\n    const openedMenus = ref<MenuProvider['openedMenus']>(\n      props.defaultOpeneds && !props.collapse\n        ? props.defaultOpeneds.slice(0)\n        : []\n    )\n    const activeIndex = ref<MenuProvider['activeIndex']>(props.defaultActive)\n    const items = ref<MenuProvider['items']>({})\n    const subMenus = ref<MenuProvider['subMenus']>({})\n\n    // computed\n    const isMenuPopup = computed<MenuProvider['isMenuPopup']>(() => {\n      return (\n        props.mode === 'horizontal' ||\n        (props.mode === 'vertical' && props.collapse)\n      )\n    })\n\n    // methods\n    const initMenu = () => {\n      const activeItem = activeIndex.value && items.value[activeIndex.value]\n      if (!activeItem || props.mode === 'horizontal' || props.collapse) return\n\n      const indexPath = activeItem.indexPath\n\n      // 展开该菜单项的路径上所有子菜单\n      // expand all subMenus of the menu item\n      indexPath.forEach((index) => {\n        const subMenu = subMenus.value[index]\n        subMenu && openMenu(index, subMenu.indexPath)\n      })\n    }\n\n    const openMenu: MenuProvider['openMenu'] = (index, indexPath) => {\n      if (openedMenus.value.includes(index)) return\n      // 将不在该菜单路径下的其余菜单收起\n      // collapse all menu that are not under current menu item\n      if (props.uniqueOpened) {\n        openedMenus.value = openedMenus.value.filter((index: string) =>\n          indexPath.includes(index)\n        )\n      }\n      openedMenus.value.push(index)\n      emit('open', index, indexPath)\n    }\n\n    const close = (index: string) => {\n      const i = openedMenus.value.indexOf(index)\n      if (i !== -1) {\n        openedMenus.value.splice(i, 1)\n      }\n    }\n\n    const closeMenu: MenuProvider['closeMenu'] = (index, indexPath) => {\n      close(index)\n      emit('close', index, indexPath)\n    }\n\n    const handleSubMenuClick: MenuProvider['handleSubMenuClick'] = ({\n      index,\n      indexPath,\n    }) => {\n      const isOpened = openedMenus.value.includes(index)\n\n      if (isOpened) {\n        closeMenu(index, indexPath)\n      } else {\n        openMenu(index, indexPath)\n      }\n    }\n\n    const handleMenuItemClick: MenuProvider['handleMenuItemClick'] = (\n      menuItem\n    ) => {\n      if (props.mode === 'horizontal' || props.collapse) {\n        openedMenus.value = []\n      }\n\n      const { index, indexPath } = menuItem\n      if (isNil(index) || isNil(indexPath)) return\n\n      if (props.router && router) {\n        const route = menuItem.route || index\n        const routerResult = router.push(route).then((res) => {\n          if (!res) activeIndex.value = index\n          return res\n        })\n        emit(\n          'select',\n          index,\n          indexPath,\n          { index, indexPath, route },\n          routerResult\n        )\n      } else {\n        activeIndex.value = index\n        emit('select', index, indexPath, { index, indexPath })\n      }\n    }\n\n    const updateActiveIndex = (val: string) => {\n      const itemsInData = items.value\n      const item =\n        itemsInData[val] ||\n        (activeIndex.value && itemsInData[activeIndex.value]) ||\n        itemsInData[props.defaultActive]\n\n      if (item) {\n        activeIndex.value = item.index\n      } else {\n        activeIndex.value = val\n      }\n    }\n\n    const calcSliceIndex = () => {\n      if (!menu.value) return -1\n      const items = Array.from(menu.value?.childNodes ?? []).filter(\n        (item) =>\n          // remove comment type node #12634\n          item.nodeName !== '#comment' &&\n          (item.nodeName !== '#text' || item.nodeValue)\n      ) as HTMLElement[]\n      const moreItemWidth = 64\n      const paddingLeft = Number.parseInt(\n        getComputedStyle(menu.value!).paddingLeft,\n        10\n      )\n      const paddingRight = Number.parseInt(\n        getComputedStyle(menu.value!).paddingRight,\n        10\n      )\n      const menuWidth = menu.value!.clientWidth - paddingLeft - paddingRight\n      let calcWidth = 0\n      let sliceIndex = 0\n      items.forEach((item, index) => {\n        calcWidth += item.offsetWidth || 0\n        if (calcWidth <= menuWidth - moreItemWidth) {\n          sliceIndex = index + 1\n        }\n      })\n      return sliceIndex === items.length ? -1 : sliceIndex\n    }\n\n    // Common computer monitor FPS is 60Hz, which means 60 redraws per second. Calculation formula: 1000ms/60 ≈ 16.67ms, In order to avoid a certain chance of repeated triggering when `resize`, set wait to 16.67 * 2 = 33.34\n    const debounce = (fn: () => void, wait = 33.34) => {\n      let timmer: ReturnType<typeof setTimeout> | null\n      return () => {\n        timmer && clearTimeout(timmer)\n        timmer = setTimeout(() => {\n          fn()\n        }, wait)\n      }\n    }\n\n    let isFirstTimeRender = true\n    const handleResize = () => {\n      const callback = () => {\n        sliceIndex.value = -1\n        nextTick(() => {\n          sliceIndex.value = calcSliceIndex()\n        })\n      }\n      // execute callback directly when first time resize to avoid shaking\n      isFirstTimeRender ? callback() : debounce(callback)()\n      isFirstTimeRender = false\n    }\n\n    watch(\n      () => props.defaultActive,\n      (currentActive) => {\n        if (!items.value[currentActive]) {\n          activeIndex.value = ''\n        }\n        updateActiveIndex(currentActive)\n      }\n    )\n\n    watch(\n      () => props.collapse,\n      (value) => {\n        if (value) openedMenus.value = []\n      }\n    )\n\n    watch(items.value, initMenu)\n\n    let resizeStopper: UseResizeObserverReturn['stop']\n    watchEffect(() => {\n      if (props.mode === 'horizontal' && props.ellipsis)\n        resizeStopper = useResizeObserver(menu, handleResize).stop\n      else resizeStopper?.()\n    })\n\n    // provide\n    {\n      const addSubMenu: MenuProvider['addSubMenu'] = (item) => {\n        subMenus.value[item.index] = item\n      }\n\n      const removeSubMenu: MenuProvider['removeSubMenu'] = (item) => {\n        delete subMenus.value[item.index]\n      }\n\n      const addMenuItem: MenuProvider['addMenuItem'] = (item) => {\n        items.value[item.index] = item\n      }\n\n      const removeMenuItem: MenuProvider['removeMenuItem'] = (item) => {\n        delete items.value[item.index]\n      }\n      provide<MenuProvider>(\n        'rootMenu',\n        reactive({\n          props,\n          openedMenus,\n          items,\n          subMenus,\n          activeIndex,\n          isMenuPopup,\n\n          addMenuItem,\n          removeMenuItem,\n          addSubMenu,\n          removeSubMenu,\n          openMenu,\n          closeMenu,\n          handleMenuItemClick,\n          handleSubMenuClick,\n        })\n      )\n      provide<SubMenuProvider>(`subMenu:${instance.uid}`, {\n        addSubMenu,\n        removeSubMenu,\n        mouseInChild: ref(false),\n        level: 0,\n      })\n    }\n\n    // lifecycle\n    onMounted(() => {\n      if (props.mode === 'horizontal') {\n        new Menubar(instance.vnode.el!, nsMenu.namespace.value)\n      }\n    })\n\n    {\n      const open = (index: string) => {\n        const { indexPath } = subMenus.value[index]\n        indexPath.forEach((i) => openMenu(i, indexPath))\n      }\n\n      expose({\n        open,\n        close,\n        handleResize,\n      })\n    }\n\n    return () => {\n      let slot: VNodeArrayChildren = slots.default?.() ?? []\n      const vShowMore: VNode[] = []\n\n      if (props.mode === 'horizontal' && menu.value) {\n        const originalSlot = flattedChildren(slot) as VNodeArrayChildren\n        const slotDefault =\n          sliceIndex.value === -1\n            ? originalSlot\n            : originalSlot.slice(0, sliceIndex.value)\n\n        const slotMore =\n          sliceIndex.value === -1 ? [] : originalSlot.slice(sliceIndex.value)\n\n        if (slotMore?.length && props.ellipsis) {\n          slot = slotDefault\n          vShowMore.push(\n            h(\n              ElSubMenu,\n              {\n                index: 'sub-menu-more',\n                class: nsSubMenu.e('hide-arrow'),\n              },\n              {\n                title: () =>\n                  h(\n                    ElIcon,\n                    {\n                      class: nsSubMenu.e('icon-more'),\n                    },\n                    { default: () => h(More) }\n                  ),\n                default: () => slotMore,\n              }\n            )\n          )\n        }\n      }\n\n      const ulStyle = useMenuCssVar(props, 0)\n\n      const vMenu = h(\n        'ul',\n        {\n          key: String(props.collapse),\n          role: 'menubar',\n          ref: menu,\n          style: ulStyle.value,\n          class: {\n            [nsMenu.b()]: true,\n            [nsMenu.m(props.mode)]: true,\n            [nsMenu.m('collapse')]: props.collapse,\n          },\n        },\n        [...slot, ...vShowMore]\n      )\n\n      if (props.collapseTransition && props.mode === 'vertical') {\n        return h(ElMenuCollapseTransition, () => vMenu)\n      }\n\n      return vMenu\n    }\n  },\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}