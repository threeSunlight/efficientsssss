{"ast":null,"code":"function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport { computed, getCurrentInstance } from 'vue';\nimport { fromPairs } from 'lodash-unified';\nimport '../../utils/index.mjs';\nimport { debugWarn } from '../../utils/error.mjs';\nvar DEFAULT_EXCLUDE_KEYS = [\"class\", \"style\"];\nvar LISTENER_PREFIX = /^on[A-Z]/;\nvar useAttrs = function useAttrs() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _params$excludeListen = params.excludeListeners,\n    excludeListeners = _params$excludeListen === void 0 ? false : _params$excludeListen,\n    excludeKeys = params.excludeKeys;\n  var allExcludeKeys = computed(function () {\n    return ((excludeKeys == null ? void 0 : excludeKeys.value) || []).concat(DEFAULT_EXCLUDE_KEYS);\n  });\n  var instance = getCurrentInstance();\n  if (!instance) {\n    debugWarn(\"use-attrs\", \"getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function\");\n    return computed(function () {\n      return {};\n    });\n  }\n  return computed(function () {\n    var _a;\n    return fromPairs(Object.entries((_a = instance.proxy) == null ? void 0 : _a.$attrs).filter(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 1),\n        key = _ref2[0];\n      return !allExcludeKeys.value.includes(key) && !(excludeListeners && LISTENER_PREFIX.test(key));\n    }));\n  });\n};\nexport { useAttrs };","map":{"version":3,"names":["DEFAULT_EXCLUDE_KEYS","LISTENER_PREFIX","useAttrs","params","arguments","length","undefined","_params$excludeListen","excludeListeners","excludeKeys","allExcludeKeys","computed","value","concat","instance","getCurrentInstance","debugWarn","_a","fromPairs","Object","entries","proxy","$attrs","filter","_ref","_ref2","_slicedToArray","key","includes","test"],"sources":["../../../../../packages/hooks/use-attrs/index.ts"],"sourcesContent":["import { computed, getCurrentInstance } from 'vue'\nimport { fromPairs } from 'lodash-unified'\nimport { debugWarn } from '@element-plus/utils'\n\nimport type { ComputedRef } from 'vue'\n\ninterface Params {\n  excludeListeners?: boolean\n  excludeKeys?: ComputedRef<string[]>\n}\n\nconst DEFAULT_EXCLUDE_KEYS = ['class', 'style']\nconst LISTENER_PREFIX = /^on[A-Z]/\n\nexport const useAttrs = (\n  params: Params = {}\n): ComputedRef<Record<string, unknown>> => {\n  const { excludeListeners = false, excludeKeys } = params\n  const allExcludeKeys = computed<string[]>(() => {\n    return (excludeKeys?.value || []).concat(DEFAULT_EXCLUDE_KEYS)\n  })\n\n  const instance = getCurrentInstance()\n  if (!instance) {\n    debugWarn(\n      'use-attrs',\n      'getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function'\n    )\n    return computed(() => ({}))\n  }\n\n  return computed(() =>\n    fromPairs(\n      Object.entries(instance.proxy?.$attrs!).filter(\n        ([key]) =>\n          !allExcludeKeys.value.includes(key) &&\n          !(excludeListeners && LISTENER_PREFIX.test(key))\n      )\n    )\n  )\n}\n"],"mappings":";;;;;;;;;;AAGA,IAAMA,oBAAoB,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC;AAC/C,IAAMC,eAAe,GAAG,UAAU;AACtB,IAACC,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAoB;EAAA,IAAhBC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EAClC,IAAAG,qBAAA,GAAkDJ,MAAM,CAAhDK,gBAAgB;IAAhBA,gBAAgB,GAAAD,qBAAA,cAAG,KAAK,GAAAA,qBAAA;IAAEE,WAAW,GAAKN,MAAM,CAAtBM,WAAW;EAC7C,IAAMC,cAAc,GAAGC,QAAQ,CAAC,YAAM;IACpC,OAAO,CAAC,CAACF,WAAW,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,WAAW,CAACG,KAAK,KAAK,EAAE,EAAEC,MAAM,CAACb,oBAAoB,CAAC;EAClG,CAAG,CAAC;EACF,IAAMc,QAAQ,GAAGC,kBAAkB,EAAE;EACrC,IAAI,CAACD,QAAQ,EAAE;IACbE,SAAS,CAAC,WAAW,EAAE,8FAA8F,CAAC;IACtH,OAAOL,QAAQ,CAAC;MAAA,OAAO,EAAE;IAAA,CAAC,CAAC;EAC/B;EACE,OAAOA,QAAQ,CAAC,YAAM;IACpB,IAAIM,EAAE;IACN,OAAOC,SAAS,CAACC,MAAM,CAACC,OAAO,CAAC,CAACH,EAAE,GAAGH,QAAQ,CAACO,KAAK,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGJ,EAAE,CAACK,MAAM,CAAC,CAACC,MAAM,CAAC,UAAAC,IAAA;MAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;QAAEG,GAAG,GAAAF,KAAA;MAAA,OAAM,CAACf,cAAc,CAACE,KAAK,CAACgB,QAAQ,CAACD,GAAG,CAAC,IAAI,EAAEnB,gBAAgB,IAAIP,eAAe,CAAC4B,IAAI,CAACF,GAAG,CAAC,CAAC;IAAA,EAAC,CAAC;EACnM,CAAG,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}