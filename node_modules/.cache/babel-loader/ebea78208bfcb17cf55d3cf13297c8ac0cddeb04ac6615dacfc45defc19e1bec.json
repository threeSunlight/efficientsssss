{"ast":null,"code":"import { defineComponent, provide, reactive, toRef, ref, createVNode, mergeProps } from 'vue';\nimport dayjs from 'dayjs';\nimport customParseFormat from 'dayjs/plugin/customParseFormat.js';\nimport advancedFormat from 'dayjs/plugin/advancedFormat.js';\nimport localeData from 'dayjs/plugin/localeData.js';\nimport weekOfYear from 'dayjs/plugin/weekOfYear.js';\nimport weekYear from 'dayjs/plugin/weekYear.js';\nimport dayOfYear from 'dayjs/plugin/dayOfYear.js';\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter.js';\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore.js';\nimport '../../../hooks/index.mjs';\nimport '../../time-picker/index.mjs';\nimport { ROOT_PICKER_INJECTION_KEY } from './constants.mjs';\nimport { datePickerProps } from './props/date-picker.mjs';\nimport { getPanel } from './panel-utils.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { DEFAULT_FORMATS_DATEPICKER, DEFAULT_FORMATS_DATE } from '../../time-picker/src/constants.mjs';\nimport CommonPicker from '../../time-picker/src/common/picker.mjs';\ndayjs.extend(localeData);\ndayjs.extend(advancedFormat);\ndayjs.extend(customParseFormat);\ndayjs.extend(weekOfYear);\ndayjs.extend(weekYear);\ndayjs.extend(dayOfYear);\ndayjs.extend(isSameOrAfter);\ndayjs.extend(isSameOrBefore);\nvar DatePicker = defineComponent({\n  name: \"ElDatePicker\",\n  install: null,\n  props: datePickerProps,\n  emits: [\"update:modelValue\"],\n  setup: function setup(props, _ref) {\n    var expose = _ref.expose,\n      emit = _ref.emit,\n      slots = _ref.slots;\n    var ns = useNamespace(\"picker-panel\");\n    provide(\"ElPopperOptions\", reactive(toRef(props, \"popperOptions\")));\n    provide(ROOT_PICKER_INJECTION_KEY, {\n      slots: slots,\n      pickerNs: ns\n    });\n    var commonPicker = ref();\n    var refProps = {\n      focus: function focus() {\n        var focusStartInput = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        var _a;\n        (_a = commonPicker.value) == null ? void 0 : _a.focus(focusStartInput);\n      },\n      handleOpen: function handleOpen() {\n        var _a;\n        (_a = commonPicker.value) == null ? void 0 : _a.handleOpen();\n      },\n      handleClose: function handleClose() {\n        var _a;\n        (_a = commonPicker.value) == null ? void 0 : _a.handleClose();\n      }\n    };\n    expose(refProps);\n    var onModelValueUpdated = function onModelValueUpdated(val) {\n      emit(\"update:modelValue\", val);\n    };\n    return function () {\n      var _a;\n      var format = (_a = props.format) != null ? _a : DEFAULT_FORMATS_DATEPICKER[props.type] || DEFAULT_FORMATS_DATE;\n      var Component = getPanel(props.type);\n      return createVNode(CommonPicker, mergeProps(props, {\n        \"format\": format,\n        \"type\": props.type,\n        \"ref\": commonPicker,\n        \"onUpdate:modelValue\": onModelValueUpdated\n      }), {\n        \"default\": function _default(scopedProps) {\n          return createVNode(Component, scopedProps, null);\n        },\n        \"range-separator\": slots[\"range-separator\"]\n      });\n    };\n  }\n});\nexport { DatePicker as default };","map":{"version":3,"names":["dayjs","extend","localeData","advancedFormat","customParseFormat","weekOfYear","weekYear","dayOfYear","isSameOrAfter","isSameOrBefore","DatePicker","defineComponent","name","install","props","datePickerProps","emits","expose","_ref","emit","slots","ns","useNamespace","provide","reactive","toRef","ROOT_PICKER_INJECTION_KEY","pickerNs","commonPicker","ref","refProps","focus","focusStartInput","arguments","length","undefined","_a","value","handleOpen","handleClose","onModelValueUpdated","val","format","DEFAULT_FORMATS_DATEPICKER","type","DEFAULT_FORMATS_DATE","Component","getPanel","createVNode","CommonPicker","mergeProps","_default","scopedProps"],"sources":["../../../../../../packages/components/date-picker/src/date-picker.tsx"],"sourcesContent":["import { defineComponent, provide, reactive, ref, toRef } from 'vue'\nimport dayjs from 'dayjs'\nimport customParseFormat from 'dayjs/plugin/customParseFormat.js'\nimport advancedFormat from 'dayjs/plugin/advancedFormat.js'\nimport localeData from 'dayjs/plugin/localeData.js'\nimport weekOfYear from 'dayjs/plugin/weekOfYear.js'\nimport weekYear from 'dayjs/plugin/weekYear.js'\nimport dayOfYear from 'dayjs/plugin/dayOfYear.js'\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter.js'\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore.js'\nimport { useNamespace } from '@element-plus/hooks'\nimport {\n  CommonPicker,\n  DEFAULT_FORMATS_DATE,\n  DEFAULT_FORMATS_DATEPICKER,\n} from '@element-plus/components/time-picker'\nimport { ROOT_PICKER_INJECTION_KEY } from './constants'\n\nimport { datePickerProps } from './props/date-picker'\nimport { getPanel } from './panel-utils'\n\ndayjs.extend(localeData)\ndayjs.extend(advancedFormat)\ndayjs.extend(customParseFormat)\ndayjs.extend(weekOfYear)\ndayjs.extend(weekYear)\ndayjs.extend(dayOfYear)\ndayjs.extend(isSameOrAfter)\ndayjs.extend(isSameOrBefore)\n\nexport default defineComponent({\n  name: 'ElDatePicker',\n  install: null,\n  props: datePickerProps,\n  emits: ['update:modelValue'],\n  setup(props, { expose, emit, slots }) {\n    const ns = useNamespace('picker-panel')\n\n    provide('ElPopperOptions', reactive(toRef(props, 'popperOptions')))\n    provide(ROOT_PICKER_INJECTION_KEY, {\n      slots,\n      pickerNs: ns,\n    })\n\n    const commonPicker = ref<InstanceType<typeof CommonPicker>>()\n    const refProps = {\n      focus: (focusStartInput = true) => {\n        commonPicker.value?.focus(focusStartInput)\n      },\n      handleOpen: () => {\n        commonPicker.value?.handleOpen()\n      },\n      handleClose: () => {\n        commonPicker.value?.handleClose()\n      },\n    }\n\n    expose(refProps)\n\n    const onModelValueUpdated = (val: any) => {\n      emit('update:modelValue', val)\n    }\n\n    return () => {\n      // since props always have all defined keys on it, {format, ...props} will always overwrite format\n      // pick props.format or provide default value here before spreading\n      const format =\n        props.format ??\n        (DEFAULT_FORMATS_DATEPICKER[props.type] || DEFAULT_FORMATS_DATE)\n\n      const Component = getPanel(props.type)\n\n      return (\n        <CommonPicker\n          {...props}\n          format={format}\n          type={props.type}\n          ref={commonPicker}\n          onUpdate:modelValue={onModelValueUpdated}\n        >\n          {{\n            default: (scopedProps: /**FIXME: remove any type */ any) => (\n              <Component {...scopedProps} />\n            ),\n            'range-separator': slots['range-separator'],\n          }}\n        </CommonPicker>\n      )\n    }\n  },\n})\n"],"mappings":";;;;;;;;;;;;;;;;;;AAqBAA,KAAK,CAACC,MAAN,CAAaC,UAAb;AACAF,KAAK,CAACC,MAAN,CAAaE,cAAb;AACAH,KAAK,CAACC,MAAN,CAAaG,iBAAb;AACAJ,KAAK,CAACC,MAAN,CAAaI,UAAb;AACAL,KAAK,CAACC,MAAN,CAAaK,QAAb;AACAN,KAAK,CAACC,MAAN,CAAaM,SAAb;AACAP,KAAK,CAACC,MAAN,CAAaO,aAAb;AACAR,KAAK,CAACC,MAAN,CAAaQ,cAAb;AAEA,IAAAC,UAAA,GAAeC,eAAe,CAAC;EAC7BC,IAAI,EAAE,cADuB;EAE7BC,OAAO,EAAE,IAFoB;EAG7BC,KAAK,EAAEC,eAHsB;EAI7BC,KAAK,EAAE,CAAC,mBAAD,CAJsB;qCAKA;IAAA,IAAxBC,MAAA,GAAAC,IAAA,CAAAD,MAAA;MAAUE,IAAF,GAAAD,IAAA,CAAEC,IAAF;MAAUC,KAAV,GAAAF,IAAA,CAAUE,KAAV;IAAyB,IAAAC,EAAA,GAAAC,YAAA;IACpCC,OAAQ,oBAAAC,QAAA,CAAAC,KAAR,CAAAX,KAAA;IAEAS,OAAO,CAACG,yBAAmB,EAAQ;MAC5BN,KAAA,EAAAA,KAAA;MACLO,QADiC,EAAAN;IAEjC;IAFiC,IAAnCO,YAAA,GAAAC,GAAA;IAKA,IAAMC,QAAA;MACNC,KAAA,WAAAA,MAAA,EAAiB;QAAA,IAAjBC,eAAiB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA;QACf,IAAOG,EAAC;QACN,CAAAA,EAAA,GAAAR,YAAA,CAAoBS,KAAA,KAApB,gBAAAD,EAAA,CAAAL,KAAA,CAAAC,eAAA;OAFa;MAIfM,UAAU,EAAE,SAAAA,WAAA,EAAM;QAChB,IAAYF,EAAA;QALC,CAAAA,EAAA,GAAAR,YAAA,CAAAS,KAAA,qBAAAD,EAAA,CAAAE,UAAA;MAOf;iBACc,WAAAC,YAAA,EAAZ;QACD,IAAAH,EAAA;QATH,CAAAA,EAAA,GAAAR,YAAA,CAAAS,KAAA,qBAAAD,EAAA,CAAAG,WAAA;;;IAcAtB,MAAM,CAAAa,QAAA;IACJ,IAAIU,mBAAC,GAAqB,SAAtBA,mBAACA,CAAqBC,GAA1B;MADFtB,IAAA,sBAAAsB,GAAA;;IAIA,OAAO,YAAM;MACX,IAAAL,EAAA;MACA,IAAAM,MAAA,IAAAN,EAAA,GAAAtB,KAAA,CAAA4B,MAAA,YAAAN,EAAA,GAAAO,0BAAA,CAAA7B,KAAA,CAAA8B,IAAA,KAAAC,oBAAA;MACA,IAAMC,SACJ,GAAKC,QAAA,CAALjC,KACC,CAAA8B,IAAA;MAEH,OAAAI,WAAkB,CAAAC,YAAc,EAAAC,UAAhC,CAAApC,KAAA;QAEA,UAAA4B,MAAA;QAAA,QAAA5B,KAAA,CAAA8B,IAAA;QAAA,KAIU,EAAAhB,YAJV;QAAA,uBAAAY;QAAA,EAMyB;QANzB,oBAAAW,SAAAC,WAAA;UAAA,OAAAJ,WAAA,CAAAF,SAAA,EAAAM,WAAA;QAAA;QASM,iBAAU,EAAAhC,KACO;QAEjB;IAZN;;AAiBH"},"metadata":{},"sourceType":"module","externalDependencies":[]}