{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { createVNode, mergeProps } from 'vue';\nimport '../components/index.mjs';\nimport { oppositeOrderMap, SortOrder, Alignment } from '../constants.mjs';\nimport { placeholderSign } from '../private.mjs';\nimport { enforceUnit, componentToSlot, tryCall } from '../utils.mjs';\nimport HeaderCell from '../components/header-cell.mjs';\nimport SortIcon from '../components/sort-icon.mjs';\nvar HeaderCellRenderer = function HeaderCellRenderer(props, _ref) {\n  var slots = _ref.slots;\n  var column = props.column,\n    ns = props.ns,\n    style = props.style,\n    onColumnSorted = props.onColumnSorted;\n  var cellStyle = enforceUnit(style);\n  if (column.placeholderSign === placeholderSign) {\n    return createVNode(\"div\", {\n      \"class\": ns.em(\"header-row-cell\", \"placeholder\"),\n      \"style\": cellStyle\n    }, null);\n  }\n  var headerCellRenderer = column.headerCellRenderer,\n    headerClass = column.headerClass,\n    sortable = column.sortable;\n  var cellProps = _objectSpread(_objectSpread({}, props), {}, {\n    \"class\": ns.e(\"header-cell-text\")\n  });\n  var cellRenderer = componentToSlot(headerCellRenderer) || slots[\"default\"] || function (props2) {\n    return createVNode(HeaderCell, props2, null);\n  };\n  var Cell = cellRenderer(cellProps);\n  var sortBy = props.sortBy,\n    sortState = props.sortState,\n    headerCellProps = props.headerCellProps;\n  var sorting, sortOrder;\n  if (sortState) {\n    var order = sortState[column.key];\n    sorting = Boolean(oppositeOrderMap[order]);\n    sortOrder = sorting ? order : SortOrder.ASC;\n  } else {\n    sorting = column.key === sortBy.key;\n    sortOrder = sorting ? sortBy.order : SortOrder.ASC;\n  }\n  var cellKls = [ns.e(\"header-cell\"), tryCall(headerClass, props, \"\"), column.align === Alignment.CENTER && ns.is(\"align-center\"), column.align === Alignment.RIGHT && ns.is(\"align-right\"), sortable && ns.is(\"sortable\")];\n  var cellWrapperProps = _objectSpread(_objectSpread({}, tryCall(headerCellProps, props)), {}, _defineProperty({\n    onClick: column.sortable ? onColumnSorted : void 0,\n    \"class\": cellKls,\n    style: cellStyle\n  }, \"data-key\", column.key));\n  return createVNode(\"div\", mergeProps(cellWrapperProps, {\n    \"role\": \"columnheader\"\n  }), [Cell, sortable && createVNode(SortIcon, {\n    \"class\": [ns.e(\"sort-icon\"), sorting && ns.is(\"sorting\")],\n    \"sortOrder\": sortOrder\n  }, null)]);\n};\nexport { HeaderCellRenderer as default };","map":{"version":3,"names":["HeaderCellRenderer","props","_ref","column","ns","style","onColumnSorted","cellStyle","enforceUnit","placeholderSign","createVNode","headerCellRenderer","headerClass","cellProps","_objectSpread","e","cellRenderer","componentToSlot","slots","props2","HeaderCell","Cell","sortState","headerCellProps","sorting","Boolean","oppositeOrderMap","order","sortOrder","SortOrder","ASC","key","sortBy","cellKls","tryCall","align","Alignment","CENTER","is","RIGHT","sortable","cellWrapperProps","_defineProperty","onClick","mergeProps","SortIcon"],"sources":["../../../../../../../packages/components/table-v2/src/renderers/header-cell.tsx"],"sourcesContent":["import { HeaderCell, SortIcon } from '../components'\n// import ColumnResizer from '../table-column-resizer'\nimport { Alignment, SortOrder, oppositeOrderMap } from '../constants'\nimport { placeholderSign } from '../private'\nimport { componentToSlot, enforceUnit, tryCall } from '../utils'\n\nimport type { FunctionalComponent, UnwrapNestedRefs } from 'vue'\nimport type { UseNamespaceReturn } from '@element-plus/hooks'\nimport type { TableV2HeaderRowCellRendererParams } from '../components'\nimport type { UseTableReturn } from '../use-table'\nimport type { TableV2Props } from '../table'\nimport type { TableV2HeaderCell } from '../header-cell'\n\nexport type HeaderCellRendererProps = TableV2HeaderRowCellRendererParams &\n  UnwrapNestedRefs<Pick<UseTableReturn, 'onColumnSorted'>> &\n  Pick<TableV2Props, 'sortBy' | 'sortState' | 'headerCellProps'> & {\n    ns: UseNamespaceReturn\n  }\n\nconst HeaderCellRenderer: FunctionalComponent<HeaderCellRendererProps> = (\n  props,\n  { slots }\n) => {\n  const { column, ns, style, onColumnSorted } = props\n\n  const cellStyle = enforceUnit(style)\n\n  if (column.placeholderSign === placeholderSign) {\n    return (\n      <div class={ns.em('header-row-cell', 'placeholder')} style={cellStyle} />\n    )\n  }\n\n  const { headerCellRenderer, headerClass, sortable } = column\n\n  /**\n   * render Cell children\n   */\n\n  const cellProps = {\n    ...props,\n    class: ns.e('header-cell-text'),\n  }\n\n  const cellRenderer =\n    componentToSlot<typeof cellProps>(headerCellRenderer) ||\n    slots.default ||\n    ((props: TableV2HeaderCell) => <HeaderCell {...props} />)\n\n  const Cell = cellRenderer(cellProps)\n\n  /**\n   * Render cell container and sort indicator\n   */\n  const { sortBy, sortState, headerCellProps } = props\n\n  let sorting: boolean, sortOrder: SortOrder\n  if (sortState) {\n    const order = sortState[column.key]\n    sorting = Boolean(oppositeOrderMap[order])\n    sortOrder = sorting ? order : SortOrder.ASC\n  } else {\n    sorting = column.key === sortBy.key\n    sortOrder = sorting ? sortBy.order : SortOrder.ASC\n  }\n\n  const cellKls = [\n    ns.e('header-cell'),\n    tryCall(headerClass, props, ''),\n    column.align === Alignment.CENTER && ns.is('align-center'),\n    column.align === Alignment.RIGHT && ns.is('align-right'),\n    sortable && ns.is('sortable'),\n  ]\n\n  const cellWrapperProps = {\n    ...tryCall(headerCellProps, props),\n    onClick: column.sortable ? onColumnSorted : undefined,\n    class: cellKls,\n    style: cellStyle,\n    ['data-key']: column.key,\n  }\n\n  // For now we don't deliver resizable column feature since it has some UX issue.\n  return (\n    <div {...cellWrapperProps} role=\"columnheader\">\n      {Cell}\n\n      {sortable && (\n        <SortIcon\n          class={[ns.e('sort-icon'), sorting && ns.is('sorting')]}\n          sortOrder={sortOrder}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default HeaderCellRenderer\nexport type HeaderCellSlotProps = HeaderCellRendererProps & { class: string }\n"],"mappings":";;;;;;;;;;;;;AAIA,IAAAA,kBAAA,GAA0B,SAA1BA,mBAA0BC,KAAA,EAAAC,IAAA,EAepB;EAAA,I;EAEF,IACCC,MAAA,GACGF,KAAA,CADHE,MAAA;IACGC,EAAA,GAAAH,KAAA,CAAAG,EAAA;IAAEC,KAAF,GAAAJ,KAAA,CAAEI,KAAF;IAAUC,cAAV,GAAAL,KAAA,CAAUK,cAAV;EAAqB,IAAAC,SAAA,GAAAC,WAAA,CAAAH,KAAA;EAArB,IAAwCF,MAA9C,CAAAM,eAAA,KAAAA,eAAA;IAEA,OAAeC,WAAc;;MAEzB,OAAO,EAAPH;IACF;EAAA;MAAAI,kBAAA,GAKIR,MAAA,CALJQ,kBAAA;IAGDC,WAAA,GAEKT,MAAA,CAFLS,WAAA;eAEKT,MAAA,C;MAAAU,SAAA,GAAAC,aAAA,CAAAA,aAAA,KAAAb,KAAA;IAAmC,SAAAG,EAAA,CAAAW,CAAA;EAAA,EAAnC;EAEN,IAAAC,YAAA,GAAAC,eAAA,CAAAN,kBAAA,KAAAO,KAAA,yBAAAC,MAAA;IAAA,OAAAT,WAAA,CAAAU,UAAA,EAAAD,MAAA;EAAA;EACF,IAAAE,IAAA,GAAAL,YAAA,CAAAH,SAAA;EACA,I,SAEEZ,KAAA,C;IAAAqB,SAAe,GAAfrB,KAAA,CAAAqB,SAAe;IAEbC,eAAO,GAFTtB,KAAA,CAEEsB,eAAO;;EAGT,IAAAD,SAAkB;;IAKlBE,OAAU,GAAAC,OAAe,CAAAC,gBAAzB,CAAAC,KAAA;IAEAC,SAAA,GAAAJ,OAAA,GAAAG,KAAA,GAAAE,SAAA,CAAAC,GAAA;EACF;IACAN,OAAA,GAAArB,MAAA,CAAA4B,GAAA,KAAAC,MAAA,CAAAD,GAAA;;;MACQE,OAAA,IAAA7B,EAAA,CAAAW,CAAA,iBAAAmB,OAAA,CAAAtB,WAAA,EAAAX,KAAA,OAAAE,MAAA,CAAAgC,KAAA,KAAAC,SAAA,CAAAC,MAAA,IAAAjC,EAAA,CAAAkC,EAAA,kBAAAnC,MAAA,CAAAgC,KAAA,KAAAC,SAAA,CAAAG,KAAA,IAAAnC,EAAA,CAAAkC,EAAA,iBAAAE,QAAA,IAAApC,EAAA,CAAAkC,EAAA;MAAAG,gBAAA,GAAA3B,aAAA,CAAAA,aAAA,KAAqBoB,OAAA,CAAAX,eAAA,EAAAtB,KAAA,QAAAyC,eAAA;IAArBC,OAAN,EAAAxC,MAAA,CAAAqC,QAAA,GAAAlC,cAAA;IAEI,SAAA2B,OAAJ;;KACA,YAAe9B,MAAA,CAAA4B,GAAA,EACb;EACA,OAAArB,WAAiB,CAAC,OAAAkC,UAAiB,CAAAH,gBAAnC;IACA;EACD,CAJD,CAIO,GAAApB,IAAA,EAAAmB,QAAA,IAAA9B,WAAA,CAAAmC,QAAA;IACL,OAAO,GAAGzC,EAAM,CAAAW,CAAA,YAAS,GAAAS,OAAzB,IAAApB,EAAA,CAAAkC,EAAA;IACA,WAAS,EAAAV;EACV"},"metadata":{},"sourceType":"module","externalDependencies":[]}