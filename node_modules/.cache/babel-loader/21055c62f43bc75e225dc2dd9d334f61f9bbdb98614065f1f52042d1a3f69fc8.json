{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { defineComponent, getCurrentInstance, ref, computed, unref, inject, resolveComponent, openBlock, createBlock, withCtx, createVNode, mergeProps, renderSlot } from 'vue';\nimport '../../roving-focus-group/index.mjs';\nimport '../../../utils/index.mjs';\nimport ElDropdownItemImpl from './dropdown-item-impl.mjs';\nimport { useDropdown } from './useDropdown.mjs';\nimport { ElCollectionItem, dropdownItemProps } from './dropdown.mjs';\nimport { DROPDOWN_INJECTION_KEY } from './tokens.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport ElRovingFocusItem from '../../roving-focus-group/src/roving-focus-item.mjs';\nimport { composeEventHandlers, whenMouse } from '../../../utils/dom/event.mjs';\nvar _sfc_main = defineComponent({\n  name: \"ElDropdownItem\",\n  components: {\n    ElDropdownCollectionItem: ElCollectionItem,\n    ElRovingFocusItem: ElRovingFocusItem,\n    ElDropdownItemImpl: ElDropdownItemImpl\n  },\n  inheritAttrs: false,\n  props: dropdownItemProps,\n  emits: [\"pointermove\", \"pointerleave\", \"click\"],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      attrs = _ref.attrs;\n    var _useDropdown = useDropdown(),\n      elDropdown = _useDropdown.elDropdown;\n    var _instance = getCurrentInstance();\n    var itemRef = ref(null);\n    var textContent = computed(function () {\n      var _a, _b;\n      return (_b = (_a = unref(itemRef)) == null ? void 0 : _a.textContent) != null ? _b : \"\";\n    });\n    var _inject = inject(DROPDOWN_INJECTION_KEY, void 0),\n      onItemEnter = _inject.onItemEnter,\n      onItemLeave = _inject.onItemLeave;\n    var handlePointerMove = composeEventHandlers(function (e) {\n      emit(\"pointermove\", e);\n      return e.defaultPrevented;\n    }, whenMouse(function (e) {\n      if (props.disabled) {\n        onItemLeave(e);\n        return;\n      }\n      var target = e.currentTarget;\n      if (target === document.activeElement || target.contains(document.activeElement)) {\n        return;\n      }\n      onItemEnter(e);\n      if (!e.defaultPrevented) {\n        target == null ? void 0 : target.focus();\n      }\n    }));\n    var handlePointerLeave = composeEventHandlers(function (e) {\n      emit(\"pointerleave\", e);\n      return e.defaultPrevented;\n    }, whenMouse(function (e) {\n      onItemLeave(e);\n    }));\n    var handleClick = composeEventHandlers(function (e) {\n      if (props.disabled) {\n        return;\n      }\n      emit(\"click\", e);\n      return e.type !== \"keydown\" && e.defaultPrevented;\n    }, function (e) {\n      var _a, _b, _c;\n      if (props.disabled) {\n        e.stopImmediatePropagation();\n        return;\n      }\n      if ((_a = elDropdown == null ? void 0 : elDropdown.hideOnClick) == null ? void 0 : _a.value) {\n        (_b = elDropdown.handleClick) == null ? void 0 : _b.call(elDropdown);\n      }\n      (_c = elDropdown.commandHandler) == null ? void 0 : _c.call(elDropdown, props.command, _instance, e);\n    });\n    var propsAndAttrs = computed(function () {\n      return _objectSpread(_objectSpread({}, props), attrs);\n    });\n    return {\n      handleClick: handleClick,\n      handlePointerMove: handlePointerMove,\n      handlePointerLeave: handlePointerLeave,\n      textContent: textContent,\n      propsAndAttrs: propsAndAttrs\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _a;\n  var _component_el_dropdown_item_impl = resolveComponent(\"el-dropdown-item-impl\");\n  var _component_el_roving_focus_item = resolveComponent(\"el-roving-focus-item\");\n  var _component_el_dropdown_collection_item = resolveComponent(\"el-dropdown-collection-item\");\n  return openBlock(), createBlock(_component_el_dropdown_collection_item, {\n    disabled: _ctx.disabled,\n    \"text-value\": (_a = _ctx.textValue) != null ? _a : _ctx.textContent\n  }, {\n    \"default\": withCtx(function () {\n      return [createVNode(_component_el_roving_focus_item, {\n        focusable: !_ctx.disabled\n      }, {\n        \"default\": withCtx(function () {\n          return [createVNode(_component_el_dropdown_item_impl, mergeProps(_ctx.propsAndAttrs, {\n            onPointerleave: _ctx.handlePointerLeave,\n            onPointermove: _ctx.handlePointerMove,\n            onClickimpl: _ctx.handleClick\n          }), {\n            \"default\": withCtx(function () {\n              return [renderSlot(_ctx.$slots, \"default\")];\n            }),\n            _: 3\n          }, 16, [\"onPointerleave\", \"onPointermove\", \"onClickimpl\"])];\n        }),\n        _: 3\n      }, 8, [\"focusable\"])];\n    }),\n    _: 3\n  }, 8, [\"disabled\", \"text-value\"]);\n}\nvar DropdownItem = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue\"]]);\nexport { DropdownItem as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","components","ElDropdownCollectionItem","ElCollectionItem","ElRovingFocusItem","ElDropdownItemImpl","inheritAttrs","props","dropdownItemProps","emits","setup","_ref","emit","attrs","_useDropdown","useDropdown","elDropdown","_instance","getCurrentInstance","itemRef","ref","textContent","computed","_a","_b","unref","_inject","inject","DROPDOWN_INJECTION_KEY","onItemEnter","onItemLeave","handlePointerMove","composeEventHandlers","e","defaultPrevented","whenMouse","disabled","target","currentTarget","document","activeElement","contains","focus","handlePointerLeave","handleClick","type","_c","stopImmediatePropagation","hideOnClick","value","call","commandHandler","command","propsAndAttrs","_objectSpread","_cache","$props","$setup","$data","$options","_component_el_dropdown_item_impl","resolveComponent","_component_el_roving_focus_item","openBlock","createBlock","_component_el_dropdown_collection_item","_ctx","textValue","withCtx","createVNode","focusable","mergeProps","onPointerleave","onPointermove"],"sources":["../../../../../../packages/components/dropdown/src/dropdown-item.vue"],"sourcesContent":["<template>\n  <el-dropdown-collection-item\n    :disabled=\"disabled\"\n    :text-value=\"textValue ?? textContent\"\n  >\n    <el-roving-focus-item :focusable=\"!disabled\">\n      <el-dropdown-item-impl\n        v-bind=\"propsAndAttrs\"\n        @pointerleave=\"handlePointerLeave\"\n        @pointermove=\"handlePointerMove\"\n        @clickimpl=\"handleClick\"\n      >\n        <slot />\n      </el-dropdown-item-impl>\n    </el-roving-focus-item>\n  </el-dropdown-collection-item>\n</template>\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  inject,\n  ref,\n  unref,\n} from 'vue'\nimport { ElRovingFocusItem } from '@element-plus/components/roving-focus-group'\nimport { composeEventHandlers, whenMouse } from '@element-plus/utils'\nimport ElDropdownItemImpl from './dropdown-item-impl.vue'\nimport { useDropdown } from './useDropdown'\nimport {\n  ElCollectionItem as ElDropdownCollectionItem,\n  dropdownItemProps,\n} from './dropdown'\nimport { DROPDOWN_INJECTION_KEY } from './tokens'\n\nexport default defineComponent({\n  name: 'ElDropdownItem',\n  components: {\n    ElDropdownCollectionItem,\n    ElRovingFocusItem,\n    ElDropdownItemImpl,\n  },\n  inheritAttrs: false,\n  props: dropdownItemProps,\n  emits: ['pointermove', 'pointerleave', 'click'],\n  setup(props, { emit, attrs }) {\n    const { elDropdown } = useDropdown()\n    const _instance = getCurrentInstance()\n    const itemRef = ref<HTMLElement | null>(null)\n    const textContent = computed(() => unref(itemRef)?.textContent ?? '')\n    const { onItemEnter, onItemLeave } = inject(\n      DROPDOWN_INJECTION_KEY,\n      undefined\n    )!\n\n    const handlePointerMove = composeEventHandlers(\n      (e: PointerEvent) => {\n        emit('pointermove', e)\n        return e.defaultPrevented\n      },\n      whenMouse((e) => {\n        if (props.disabled) {\n          onItemLeave(e)\n          return\n        }\n\n        const target = e.currentTarget as HTMLElement\n        /**\n         * This handles the following scenario:\n         *   when the item contains a form element such as input element\n         *   when the mouse is moving over the element itself which is contained by\n         *   the item, the default focusing logic should be prevented so that\n         *   it won't cause weird action.\n         */\n        if (\n          target === document.activeElement ||\n          target.contains(document.activeElement)\n        ) {\n          return\n        }\n\n        onItemEnter(e)\n        if (!e.defaultPrevented) {\n          target?.focus()\n        }\n      })\n    )\n\n    const handlePointerLeave = composeEventHandlers(\n      (e: PointerEvent) => {\n        emit('pointerleave', e)\n        return e.defaultPrevented\n      },\n      whenMouse((e) => {\n        onItemLeave(e)\n      })\n    )\n\n    const handleClick = composeEventHandlers(\n      (e: PointerEvent) => {\n        if (props.disabled) {\n          return\n        }\n        emit('click', e)\n        return e.type !== 'keydown' && e.defaultPrevented\n      },\n      (e) => {\n        if (props.disabled) {\n          e.stopImmediatePropagation()\n          return\n        }\n        if (elDropdown?.hideOnClick?.value) {\n          elDropdown.handleClick?.()\n        }\n        elDropdown.commandHandler?.(props.command, _instance, e)\n      }\n    )\n\n    // direct usage of v-bind={ ...$props, ...$attrs } causes type errors\n    const propsAndAttrs = computed(() => {\n      return { ...props, ...attrs }\n    })\n\n    return {\n      handleClick,\n      handlePointerMove,\n      handlePointerLeave,\n      textContent,\n      propsAndAttrs,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;AAoCA,IAAKA,SAAA,GAAaC,eAAa;EAC7BC,IAAM;EACNC,UAAY;IAAAC,wBAAA,EACVC,gBAAA;IACAC,iBAAA,EAAAA,iBAAA;IACAC,kBAAA,EAAAA;EAAA,CACF;EACAC,YAAc;EACdC,KAAO,EAAAC,iBAAA;EACPC,KAAO,GAAC,aAAe,kBAAgB,OAAO;EAC9CC,KAAM,WAAAA,MAAAH,KAAA,EAAAI,IAAA,EAAwB;IAAA,IAAfC,IAAA,GAAAD,IAAA,CAAAC,IAAA;MAAMC,KAAS,GAAAF,IAAA,CAATE,KAAS;IACtB,IAAAC,YAAA,GAAiBC,WAAY;MAA3BC,UAAA,GAAAF,YAAA,CAAAE,UAAA;IACR,IAAMC,SAAA,GAAYC,kBAAmB;IAC/B,IAAAC,OAAA,GAAUC,GAAA,CAAwB,IAAI;IAC5C,IAAMC,WAAA,GAAcC,QAAS,aAAM;MACnC,IAAMC,EAAE,EAAAC,EAAA;MAKF,QAAAA,EAAA,IAAAD,EAAA,GAAAE,KAAoB,CACxBN,OAAA,kBAAqB,IAAAI,EAAA,CAAAF,WAAA,YAAAG,EAAA;IACnB;IACA,IAAAE,OAAA,GAASC,MAAA,CAAAC,sBAAA;MAATC,WAAS,GAAAH,OAAA,CAATG,WAAS;MAAAC,WAAA,GAAAJ,OAAA,CAAAI,WAAA;IACX,IACUC,iBAAO,GAAAC,oBAAA,WAAAC,CAAA;MACfrB,IAAI,cAAgB,EAAAqB,CAAA;MAClB,OAAAA,CAAA,CAAAC,gBAAa;IACb,GAAAC,SAAA,WAAAF,CAAA;MACF,IAAA1B,KAAA,CAAA6B,QAAA;QAEAN,WAAA,CAAAG,CAAe,CAAE;QAQjB;MAIE;MACF,IAAAI,MAAA,GAAAJ,CAAA,CAAAK,aAAA;MAEA,IAAAD,MAAA,KAAaE,QAAA,CAAAC,aAAA,IAAAH,MAAA,CAAAI,QAAA,CAAAF,QAAA,CAAAC,aAAA;QACT;MACF;MACFX,WAAA,CAAAI,CAAA;MAEJ,KAAAA,CAAA,CAAAC,gBAAA;QAEMG,MAAA,iBAAqB,GACzBA,MAAA,CAAAK,KAAA;MACE;IACA;IACF,IACUC,kBAAO,GAAAX,oBAAA,WAAAC,CAAA;MACfrB,IAAA,eAAa,EAAAqB,CAAA;MAEjB,OAAAA,CAAA,CAAAC,gBAAA;IAEA,CAAM,EAAAC,SAAA,WAAAF,CAAA,EAAc;MAEhBH,WAAoB,CAAAG,CAAA;IAClB;IACF,IAAAW,WAAA,GAAAZ,oBAAA,WAAAC,CAAA;MACA,IAAA1B,KAAA,CAAA6B,QAAe;QACR;MAA0B;MAGjCxB,IAAI,QAAgB,EAAAqB,CAAA;MAClB,OAA2BA,CAAA,CAAAY,IAAA,kBAAAZ,CAAA,CAAAC,gBAAA;IAC3B,aAAAD,CAAA;MACF,IAAAV,EAAA,EAAAC,EAAA,EAAAsB,EAAA;MACI,IAAAvC,KAAA,CAAA6B,QAAA;QACFH,CAAA,CAAAc,wBAAyB;QAC3B;MACA;MAEJ,KAAAxB,EAAA,GAAAP,UAAA,oBAAAA,UAAA,CAAAgC,WAAA,qBAAAzB,EAAA,CAAA0B,KAAA;QAGM,CAAAzB,EAAA,GAAAR,UAAA,CAAA4B,WAA+B,qBAAApB,EAAA,CAAA0B,IAAA,CAAAlC,UAAA;MACnC;MACD,CAAA8B,EAAA,GAAA9B,UAAA,CAAAmC,cAAA,qBAAAL,EAAA,CAAAI,IAAA,CAAAlC,UAAA,EAAAT,KAAA,CAAA6C,OAAA,EAAAnC,SAAA,EAAAgB,CAAA;IAED,CAAO;IACL,IAAAoB,aAAA,GAAA/B,QAAA;MACA,OAAAgC,aAAA,CAAAA,aAAA,KAAA/C,KAAA,GAAAM,KAAA;IAAA,CACA;IACA;MACA+B,WAAA,EAAAA,WAAA;MACFb,iBAAA,EAAAA,iBAAA;MACFY,kBAAA,EAAAA,kBAAA;MACDtB,WAAA,EAAAA,WAAA;;;;;yBArH+B,EAAAkC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,QAAA;EAAA,IAbjBpC,EAAA;EAAA,IAAAqC,gCACe,GAAAC,gBAAA;EAAA,IAAAC,+BAAA,GAAAD,gBAAA;4CAWH,GAAAA,gBAAA;EAAA,OAAAE,SAAA,IAAAC,WAAA,CAAAC,sCAAA;IAAA7B,QAAA,EAAA8B,IAAA,CATS9B,QAAG;IAAA,eAAAb,EAAA,GAAA2C,IAAA,CAAAC,SAAA,YAAA5C,EAAA,GAAA2C,IAAA,CAAA7C;;IAQT,WAAA+C,OAAA;MAAA,QANDC,WACN,CAAAP,+BAAA;QAAAQ,SACD,GAAAJ,IAAA,CAAA9B;MAAA;QACF,WAAAgC,OAAA;UAAA,Q,4CAEJ,EAAAG,UAAA,CAAAL,IAAA,CAAAb,aAAA;YAAAmB,cAAA,EAAAN,IAAA,CAAAvB,kBAAA;YAAA8B,aAAA,EAAAP,IAAA,CAAAnC,iBAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}